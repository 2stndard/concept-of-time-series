<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7.2 fable framework | Untitled</title>
  <meta name="description" content="7.2 fable framework | Untitled" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="7.2 fable framework | Untitled" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7.2 fable framework | Untitled" />
  
  
  

<meta name="author" content="이기준" />


<meta name="date" content="2021-02-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="성능분석-지수.html"/>
<link rel="next" href="modeltime.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">교육, 고용, 코로나 데이터를 활용한 시계열 데이터 분석 in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 시계열 데이터</a>
<ul>
<li class="chapter" data-level="1.1" data-path="시계열-데이터란.html"><a href="시계열-데이터란.html"><i class="fa fa-check"></i><b>1.1</b> 시계열 데이터란?</a></li>
<li class="chapter" data-level="1.2" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html"><i class="fa fa-check"></i><b>1.2</b> 시계열 데이터의 특성</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#고정된-시간-독립변수"><i class="fa fa-check"></i><b>1.2.1</b> 고정된 시간 독립변수</a></li>
<li class="chapter" data-level="1.2.2" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#자기-상관관계"><i class="fa fa-check"></i><b>1.2.2</b> 자기 상관관계</a></li>
<li class="chapter" data-level="1.2.3" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#추세-경향성trend"><i class="fa fa-check"></i><b>1.2.3</b> 추세 경향성(Trend)</a></li>
<li class="chapter" data-level="1.2.4" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#계절성seasonality-순환성cyclic"><i class="fa fa-check"></i><b>1.2.4</b> 계절성(Seasonality), 순환성(Cyclic)</a></li>
<li class="chapter" data-level="1.2.5" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#불확실성uncertainty"><i class="fa fa-check"></i><b>1.2.5</b> 불확실성(Uncertainty)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="시계열-데이터-타입-및-import.html"><a href="시계열-데이터-타입-및-import.html"><i class="fa fa-check"></i><b>2</b> 시계열 데이터 타입 및 Import</a>
<ul>
<li class="chapter" data-level="2.1" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html"><i class="fa fa-check"></i><b>2.1</b> 날짜/시간 데이터 클래스</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#date-클래스"><i class="fa fa-check"></i><b>2.1.1</b> date 클래스</a></li>
<li class="chapter" data-level="2.1.2" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#posixct-posixlt-data-class"><i class="fa fa-check"></i><b>2.1.2</b> POSIXct, POSIXlt data class</a></li>
<li class="chapter" data-level="2.1.3" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#yearmon-yearqtr-class"><i class="fa fa-check"></i><b>2.1.3</b> yearmon, yearqtr class</a></li>
<li class="chapter" data-level="2.1.4" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#날짜-시간-포맷"><i class="fa fa-check"></i><b>2.1.4</b> 날짜, 시간 포맷</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="시계열-데이터-객체object.html"><a href="시계열-데이터-객체object.html"><i class="fa fa-check"></i><b>2.2</b> 시계열 데이터 객체(Object)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="시계열-데이터-객체object.html"><a href="시계열-데이터-객체object.html#ts-r-basestats"><i class="fa fa-check"></i><b>2.2.1</b> ts : R base(stats)</a></li>
<li class="chapter" data-level="2.2.2" data-path="시계열-데이터-객체object.html"><a href="시계열-데이터-객체object.html#xts"><i class="fa fa-check"></i><b>2.2.2</b> xts</a></li>
<li class="chapter" data-level="2.2.3" data-path="시계열-데이터-객체object.html"><a href="시계열-데이터-객체object.html#tsibble"><i class="fa fa-check"></i><b>2.2.3</b> tsibble</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="시계열-데이터-import.html"><a href="시계열-데이터-import.html"><i class="fa fa-check"></i><b>2.3</b> 시계열 데이터 Import</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="시계열-데이터-import.html"><a href="시계열-데이터-import.html#엑셀-파일"><i class="fa fa-check"></i><b>2.3.1</b> 엑셀 파일</a></li>
<li class="chapter" data-level="2.3.2" data-path="시계열-데이터-import.html"><a href="시계열-데이터-import.html#csv-파일"><i class="fa fa-check"></i><b>2.3.2</b> CSV 파일</a></li>
<li class="chapter" data-level="2.3.3" data-path="시계열-데이터-import.html"><a href="시계열-데이터-import.html#추가-실습-데이터-생성"><i class="fa fa-check"></i><b>2.3.3</b> 추가 실습 데이터 생성</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="시계열-visualization.html"><a href="시계열-visualization.html"><i class="fa fa-check"></i><b>3</b> 시계열 Visualization</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-frame-ggplot2-패키지.html"><a href="data-frame-ggplot2-패키지.html"><i class="fa fa-check"></i><b>3.1</b> data.frame : ggplot2 패키지</a></li>
<li class="chapter" data-level="3.2" data-path="xts-xts-패키지.html"><a href="xts-xts-패키지.html"><i class="fa fa-check"></i><b>3.2</b> xts : xts 패키지</a></li>
<li class="chapter" data-level="3.3" data-path="ts-forecast-패키지.html"><a href="ts-forecast-패키지.html"><i class="fa fa-check"></i><b>3.3</b> ts : forecast 패키지</a></li>
<li class="chapter" data-level="3.4" data-path="tsibble-feasts-패키지.html"><a href="tsibble-feasts-패키지.html"><i class="fa fa-check"></i><b>3.4</b> tsibble : feasts 패키지</a></li>
<li class="chapter" data-level="3.5" data-path="data-frame-timetk-패키지.html"><a href="data-frame-timetk-패키지.html"><i class="fa fa-check"></i><b>3.5</b> data.frame : timetk 패키지</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="시계열-데이터-handling.html"><a href="시계열-데이터-handling.html"><i class="fa fa-check"></i><b>4</b> 시계열 데이터 Handling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="오늘-몇일이야-시간-정보-추출.html"><a href="오늘-몇일이야-시간-정보-추출.html"><i class="fa fa-check"></i><b>4.1</b> 오늘 몇일이야? : 시간 정보 추출</a></li>
<li class="chapter" data-level="4.2" data-path="몇일-지났어-시간-기간-연산.html"><a href="몇일-지났어-시간-기간-연산.html"><i class="fa fa-check"></i><b>4.2</b> 몇일 지났어? : 시간 기간 연산</a></li>
<li class="chapter" data-level="4.3" data-path="이번주-마지막날은-몇일이야-시간-반올림.html"><a href="이번주-마지막날은-몇일이야-시간-반올림.html"><i class="fa fa-check"></i><b>4.3</b> 이번주 마지막날은 몇일이야? : 시간 반올림</a></li>
<li class="chapter" data-level="4.4" data-path="주간-월간-데이터-합계-평균은-시간-grouping.html"><a href="주간-월간-데이터-합계-평균은-시간-grouping.html"><i class="fa fa-check"></i><b>4.4</b> 주간, 월간 데이터 합계, 평균은? : 시간 Grouping</a></li>
<li class="chapter" data-level="4.5" data-path="주식-시가-고가-저가-종가는-어떻게-구해-ohlc.html"><a href="주식-시가-고가-저가-종가는-어떻게-구해-ohlc.html"><i class="fa fa-check"></i><b>4.5</b> 주식 시가, 고가, 저가, 종가는 어떻게 구해? : OHLC</a></li>
<li class="chapter" data-level="4.6" data-path="일-평균-5일-합계는-시간-rolling.html"><a href="일-평균-5일-합계는-시간-rolling.html"><i class="fa fa-check"></i><b>4.6</b> 3일 평균, 5일 합계는? : 시간 Rolling</a></li>
<li class="chapter" data-level="4.7" data-path="지난달-데이터는-시간-filteringsubsetting.html"><a href="지난달-데이터는-시간-filteringsubsetting.html"><i class="fa fa-check"></i><b>4.7</b> 지난달 데이터는? : 시간 Filtering(Subsetting)</a></li>
<li class="chapter" data-level="4.8" data-path="월별-분기별-연별-증감량.html"><a href="월별-분기별-연별-증감량.html"><i class="fa fa-check"></i><b>4.8</b> 월별, 분기별, 연별 증감량</a></li>
<li class="chapter" data-level="4.9" data-path="월-비중-백분율-연-비중-백분율.html"><a href="월-비중-백분율-연-비중-백분율.html"><i class="fa fa-check"></i><b>4.9</b> 월 비중 백분율, 연 비중 백분율</a></li>
<li class="chapter" data-level="4.10" data-path="월별-분기별-연별-누적합계.html"><a href="월별-분기별-연별-누적합계.html"><i class="fa fa-check"></i><b>4.10</b> 월별, 분기별, 연별 누적합계</a></li>
<li class="chapter" data-level="4.11" data-path="동월별-동분기별-동년별-plot.html"><a href="동월별-동분기별-동년별-plot.html"><i class="fa fa-check"></i><b>4.11</b> 동월별, 동분기별, 동년별 Plot</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="시계열-forecasting-part-i-기초컨셉.html"><a href="시계열-forecasting-part-i-기초컨셉.html"><i class="fa fa-check"></i><b>5</b> 시계열 forecasting Part I - 기초컨셉</a>
<ul>
<li class="chapter" data-level="5.1" data-path="정상성stationary-비정상성non-stationary.html"><a href="정상성stationary-비정상성non-stationary.html"><i class="fa fa-check"></i><b>5.1</b> 정상성(Stationary), 비정상성(Non-Stationary)</a></li>
<li class="chapter" data-level="5.2" data-path="지연lag와-차분difference.html"><a href="지연lag와-차분difference.html"><i class="fa fa-check"></i><b>5.2</b> 지연(Lag)와 차분(Difference)</a></li>
<li class="chapter" data-level="5.3" data-path="acf와-pacf.html"><a href="acf와-pacf.html"><i class="fa fa-check"></i><b>5.3</b> ACF와 PACF</a></li>
<li class="chapter" data-level="5.4" data-path="적합값fitted-value-와-잔차residuals.html"><a href="적합값fitted-value-와-잔차residuals.html"><i class="fa fa-check"></i><b>5.4</b> 적합값(fitted value) 와 잔차(residuals)</a></li>
<li class="chapter" data-level="5.5" data-path="백색-잡음white-noise.html"><a href="백색-잡음white-noise.html"><i class="fa fa-check"></i><b>5.5</b> 백색 잡음(White Noise)</a></li>
<li class="chapter" data-level="5.6" data-path="시계열-분해decomposition.html"><a href="시계열-분해decomposition.html"><i class="fa fa-check"></i><b>5.6</b> 시계열 분해(Decomposition)</a></li>
<li class="chapter" data-level="5.7" data-path="정상성-테스트.html"><a href="정상성-테스트.html"><i class="fa fa-check"></i><b>5.7</b> 정상성 테스트</a></li>
<li class="chapter" data-level="5.8" data-path="계절성-ploting과-테스트.html"><a href="계절성-ploting과-테스트.html"><i class="fa fa-check"></i><b>5.8</b> 계절성 ploting과 테스트</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="시계열-forecasting-part-ii-시계열-예측-모델.html"><a href="시계열-forecasting-part-ii-시계열-예측-모델.html"><i class="fa fa-check"></i><b>6</b> 시계열 forecasting Part II - 시계열 예측 모델</a>
<ul>
<li class="chapter" data-level="6.1" data-path="simple-모델.html"><a href="simple-모델.html"><i class="fa fa-check"></i><b>6.1</b> Simple 모델</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="simple-모델.html"><a href="simple-모델.html#평균-모델forecastmeanf"><i class="fa fa-check"></i><b>6.1.1</b> 평균 모델(forecast::meanf)</a></li>
<li class="chapter" data-level="6.1.2" data-path="simple-모델.html"><a href="simple-모델.html#단순naive-모델"><i class="fa fa-check"></i><b>6.1.2</b> 단순(Naive) 모델</a></li>
<li class="chapter" data-level="6.1.3" data-path="simple-모델.html"><a href="simple-모델.html#계절성-단순seasonal-naive-모델"><i class="fa fa-check"></i><b>6.1.3</b> 계절성 단순(Seasonal Naive) 모델</a></li>
<li class="chapter" data-level="6.1.4" data-path="simple-모델.html"><a href="simple-모델.html#random-work-모델"><i class="fa fa-check"></i><b>6.1.4</b> Random Work 모델</a></li>
<li class="chapter" data-level="6.1.5" data-path="simple-모델.html"><a href="simple-모델.html#simple-모델-비교"><i class="fa fa-check"></i><b>6.1.5</b> Simple 모델 비교</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="regression-모델.html"><a href="regression-모델.html"><i class="fa fa-check"></i><b>6.2</b> Regression 모델</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="regression-모델.html"><a href="regression-모델.html#tslm-함수forecast-패키지"><i class="fa fa-check"></i><b>6.2.1</b> tslm 함수(forecast 패키지)</a></li>
<li class="chapter" data-level="6.2.2" data-path="regression-모델.html"><a href="regression-모델.html#plot_time_series_regression-함수timetk-패키지"><i class="fa fa-check"></i><b>6.2.2</b> plot_time_series_regression 함수(timetk 패키지)</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html"><i class="fa fa-check"></i><b>6.3</b> 지수 평활(Exponential Smoothing) 모델</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#단순-지수-평활-모델simple-exponentail-smoothing-model"><i class="fa fa-check"></i><b>6.3.1</b> 단순 지수 평활 모델(Simple Exponentail Smoothing Model)</a></li>
<li class="chapter" data-level="6.3.2" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#홀트holt-모델"><i class="fa fa-check"></i><b>6.3.2</b> 홀트(Holt) 모델</a></li>
<li class="chapter" data-level="6.3.3" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#홀트-윈터holt-winter-모델"><i class="fa fa-check"></i><b>6.3.3</b> 홀트-윈터(Holt-Winter) 모델</a></li>
<li class="chapter" data-level="6.3.4" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#ets-모델"><i class="fa fa-check"></i><b>6.3.4</b> ETS 모델</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="arima-모델.html"><a href="arima-모델.html"><i class="fa fa-check"></i><b>6.4</b> ARIMA 모델</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="arima-모델.html"><a href="arima-모델.html#자기회귀모델autoregressive-model"><i class="fa fa-check"></i><b>6.4.1</b> 자기회귀모델(AutoRegressive Model)</a></li>
<li class="chapter" data-level="6.4.2" data-path="arima-모델.html"><a href="arima-모델.html#이동평균-모델moving-average-model"><i class="fa fa-check"></i><b>6.4.2</b> 이동평균 모델(Moving Average Model)</a></li>
<li class="chapter" data-level="6.4.3" data-path="arima-모델.html"><a href="arima-모델.html#arima-모델-결정"><i class="fa fa-check"></i><b>6.4.3</b> ARIMA 모델 결정</a></li>
<li class="chapter" data-level="6.4.4" data-path="arima-모델.html"><a href="arima-모델.html#seasonal-arima-모델"><i class="fa fa-check"></i><b>6.4.4</b> Seasonal ARIMA 모델</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="tbats-모델.html"><a href="tbats-모델.html"><i class="fa fa-check"></i><b>6.5</b> TBATs 모델</a></li>
<li class="chapter" data-level="6.6" data-path="prophet-모델.html"><a href="prophet-모델.html"><i class="fa fa-check"></i><b>6.6</b> prophet 모델</a></li>
<li class="chapter" data-level="6.7" data-path="neural-network-모델.html"><a href="neural-network-모델.html"><i class="fa fa-check"></i><b>6.7</b> Neural Network 모델</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="시계열-forecasting-part-iii-시계열-분석-framework.html"><a href="시계열-forecasting-part-iii-시계열-분석-framework.html"><i class="fa fa-check"></i><b>7</b> 시계열 forecasting Part III - 시계열 분석 Framework</a>
<ul>
<li class="chapter" data-level="7.1" data-path="성능분석-지수.html"><a href="성능분석-지수.html"><i class="fa fa-check"></i><b>7.1</b> 성능분석 지수</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="성능분석-지수.html"><a href="성능분석-지수.html#rmseroot-means-squaread-error"><i class="fa fa-check"></i><b>7.1.1</b> RMSE(Root Means Squaread Error)</a></li>
<li class="chapter" data-level="7.1.2" data-path="성능분석-지수.html"><a href="성능분석-지수.html#mae"><i class="fa fa-check"></i><b>7.1.2</b> MAE</a></li>
<li class="chapter" data-level="7.1.3" data-path="성능분석-지수.html"><a href="성능분석-지수.html#mpe"><i class="fa fa-check"></i><b>7.1.3</b> MPE</a></li>
<li class="chapter" data-level="7.1.4" data-path="성능분석-지수.html"><a href="성능분석-지수.html#mape"><i class="fa fa-check"></i><b>7.1.4</b> MAPE</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="fable-framework.html"><a href="fable-framework.html"><i class="fa fa-check"></i><b>7.2</b> fable framework</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="fable-framework.html"><a href="fable-framework.html#미래-학생수-예측"><i class="fa fa-check"></i><b>7.2.1</b> 미래 학생수 예측</a></li>
<li class="chapter" data-level="7.2.2" data-path="fable-framework.html"><a href="fable-framework.html#미래-취업자수-예측"><i class="fa fa-check"></i><b>7.2.2</b> 미래 취업자수 예측</a></li>
<li class="chapter" data-level="7.2.3" data-path="fable-framework.html"><a href="fable-framework.html#미래-코로나-확진자수-예측"><i class="fa fa-check"></i><b>7.2.3</b> 미래 코로나 확진자수 예측</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="modeltime.html"><a href="modeltime.html"><i class="fa fa-check"></i><b>7.3</b> modeltime</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="modeltime.html"><a href="modeltime.html#미래-학생수-예측-1"><i class="fa fa-check"></i><b>7.3.1</b> 미래 학생수 예측</a></li>
<li class="chapter" data-level="7.3.2" data-path="modeltime.html"><a href="modeltime.html#미래-취업자수-예측-1"><i class="fa fa-check"></i><b>7.3.2</b> 미래 취업자수 예측</a></li>
<li class="chapter" data-level="7.3.3" data-path="modeltime.html"><a href="modeltime.html#미래-코로나-확진자수-예측-1"><i class="fa fa-check"></i><b>7.3.3</b> 미래 코로나 확진자수 예측</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a>
<ul>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7.4</b> R Markdown</a></li>
<li class="chapter" data-level="7.5" data-path="including-plots.html"><a href="including-plots.html"><i class="fa fa-check"></i><b>7.5</b> Including Plots</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Untitled</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="fable-framework" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> fable framework</h2>
<p><code>fable</code> 프레임워크는 패키지로 제공되는데 시계열 데이터 분석을 위한 프레임워크로 평균모델, 랜덤워크 모델 등 심플 모델부터 지수 평활 모델, 자기 회귀 모델과 같이 전통적으로 오랫동안 사용되어 온 모델, 신경망 모델, prophet 모델 등 최근에 개발된 모델까지 생성하여 비교해서 최적의 모델을 선택할 수 있는 종합적인 방법을 제공한다.</p>
<p><code>fable</code> 프레임워크는 지수 평활 모델, 자기 회귀 모델 등을 사용하기 위해 선택해야하는 모델 계수들을 자동적으로 선택해주고 일변량과 다변량을 모두 지원하기 때문에 사용하기 쉽다. 이 프레임워크는 <code>fabletools</code>패키지를 기반으로 작동하고 <code>tidyverse</code> 생태계(echosystem)에서 사용하는 워크 플로우(work flow)를 준용하여 모델을 평가, 시각화 및 결합하는 도구를 제공한다.</p>
<div class="figure">
<img src="tidyverse_workflow.png" title="tidyverse 워크플로우" alt="" />
<p class="caption">tidyverse 워크플로우</p>
</div>
<p><code>fable</code> 프레임워크는 <code>forecast</code> 패키지를 tidy한 데이터<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>를 사용하는 방법을 활용하여 모델링하고 사용할 수있는 다양한 함수들을 제공한다.</p>
<p><code>forecast</code> 패키지는 <code>ts</code> 객체를 활용하기 때문에 tidy 생태계의 방법을 사용하는데 한계가 있었다. fable은 이를 극복하기 위해 tidy 생태계의 기본 데이터 객체인 <code>tibble</code> 객체를 기반으로한 <code>tsibble</code>을 사용한다.</p>
<p><code>forecast</code>와 <code>fable</code>의 차이는 다음과 같다.</p>
<table>
<thead>
<tr class="header">
<th align="center"></th>
<th align="center">fable</th>
<th align="center">forecast</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">객체</td>
<td align="center">tsibble</td>
<td align="center">ts</td>
</tr>
<tr class="even">
<td align="center">단일/다중 시계열</td>
<td align="center">다중 시계열 가능</td>
<td align="center">단일 시계열만 가능</td>
</tr>
<tr class="odd">
<td align="center">모델 적용</td>
<td align="center">동시에 여러 모델 적용</td>
<td align="center">동시에 한 모델 적용</td>
</tr>
<tr class="even">
<td align="center">예측결과</td>
<td align="center">점 예측과 분포 제공(<code>hilo()</code> 함수를 통해 <code>autoplot()</code>으로 플로팅 가능)</td>
<td align="center">점 예측과 예측 범위 제공</td>
</tr>
<tr class="odd">
<td align="center">앙상블 모델예측</td>
<td align="center">가능</td>
<td align="center">불가</td>
</tr>
</tbody>
</table>
<p><code>fable</code>을 활용해 시계열 모델을 세우고 plotting, 예측치 생성은 다음의 순서를 통해 구현할 수 있다.</p>
<div class="boxBorder">
<ol style="list-style-type: decimal">
<li>분석 대상 시계열 데이터를 트레이닝 셋과 테스트 셋으로 분리한다.</li>
<li><code>fable</code> 패키지의 <code>model()</code>을 사용하여 동시에 실행되어야할 모델들의 생성 함수를 넣어준다.</li>
</ol>
<table>
<thead>
<tr class="header">
<th>모델</th>
<th>함수명</th>
<th>예</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>선형회귀</td>
<td>TSLM()</td>
<td>TSLM(학생수 + trend())</td>
</tr>
<tr class="even">
<td>평균모델</td>
<td>MEAN()</td>
<td>MEAN(학생수)</td>
</tr>
<tr class="odd">
<td>naive</td>
<td>NAIVE()</td>
<td>NAIVE(학생수)</td>
</tr>
<tr class="even">
<td>랜덤워크</td>
<td>RW()</td>
<td>RW(학생수)</td>
</tr>
<tr class="odd">
<td>지수평활(ets)</td>
<td>ETS</td>
<td>ETS(학생수)</td>
</tr>
<tr class="even">
<td>arima</td>
<td>ARIMA</td>
<td>ARIMA(학생수)</td>
</tr>
<tr class="odd">
<td>신경망</td>
<td>NNETAR</td>
<td>NNETAR(학생수)</td>
</tr>
<tr class="even">
<td>prophet</td>
<td>prophet(<code>fable.prophet</code> 패키지가 필요, 소문자)</td>
<td>PROPHET(학생수)</td>
</tr>
</tbody>
</table>
<ol start="3" style="list-style-type: decimal">
<li>생성된 모델을 forecast() 함수를 사용하여 원하는 미래만큼(매개변수 <code>h</code>를 사용)의 예측값을 산출한다.</li>
<li><code>autoplot()</code>을 사용하여 plotting 한다. 원본 데이터와 같이 plotting 하려면 원본데이터를 매개변수로 넣어주고 예측 레벨을 plotting하지 않으려면 <code>level</code> 매개변수를 <code>NULL</code>로 세팅한다.</li>
<li>여러 모델들의 성능측정 지수를 확인하려면 forecast 결과 객체 테스트 데이터셋을 accuracy() 함수의 매개변수로 전달한다.</li>
<li>여러 성능측정 지수를 확인하여 가장 성능이 좋은 모델을 선정하고(필자는 RMSE가 가장 낮은 모델을 주로 사용한다.) 모델객체에 select() 함수에 해당 모델 컬럼명을 넣어준다.</li>
<li>선정된 모델을 사용하여 다시 <code>forecast()</code>로 미래값을 예측하고 <code>autoplot()</code> 함수로 plot을 생성한다.</li>
</ol>
</div>
<div id="미래-학생수-예측" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> 미래 학생수 예측</h3>
<p>앞에서 설명한 방법을 사용하여 미래 학생수를 예측해 보자.</p>
<p>먼저 트레이닝 셋과 테스트셋을 나눈다. 트레이닝 데이터 셋과 테스트 데이터 셋은 80:20으로 나눈다.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="fable-framework.html#cb21-1" aria-hidden="true" tabindex="-1"></a>split <span class="ot">&lt;-</span> <span class="fu">floor</span>(<span class="fu">nrow</span>(students.tsibble) <span class="sc">*</span> <span class="fl">0.8</span>)</span>
<span id="cb21-2"><a href="fable-framework.html#cb21-2" aria-hidden="true" tabindex="-1"></a>students.tsibble.tr <span class="ot">&lt;-</span> students.tsibble[<span class="dv">1</span><span class="sc">:</span>split, ]  </span>
<span id="cb21-3"><a href="fable-framework.html#cb21-3" aria-hidden="true" tabindex="-1"></a>students.tsibble.test <span class="ot">&lt;-</span> students.tsibble[(split<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span><span class="fu">nrow</span>(students.tsibble), ]  </span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><p>students.tsibble의 행갯수(<code>nrow</code>)의 0.8을 곱한 값의 내림값(<code>floor</code>)을 구해 80:20으로 나눌 위치를 split에 저장</p></li>
<li><p>students.tsibble의 1열부터 split열까지를 studets.tsibble.tr로 저장</p></li>
<li><p>students.tsibble의 split+1열부터 마지막 열까지를 studets.tsibble.test로 저장</p></li>
</ul></li>
</ul>
</div>
<p><code>model()</code>함수에 앞에서 생성한 트레이닝 데이터 셋과 만들고 싶은 모델 함수를 사용하여 모델 데이터프레임를 만든다. 아래에서는 ets, arima, naive, tslm, rw, mean, nnetar, prophet의 8가지 모델을 만들었다.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="fable-framework.html#cb22-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">library</span>(fable)  </span>
<span id="cb22-2"><a href="fable-framework.html#cb22-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">library</span>(fable.prophet)  </span>
<span id="cb22-3"><a href="fable-framework.html#cb22-3" aria-hidden="true" tabindex="-1"></a>model.fable.students <span class="ot">&lt;-</span> <span class="fu">model</span>(students.tsibble.tr,    </span>
<span id="cb22-4"><a href="fable-framework.html#cb22-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">ets =</span> <span class="fu">ETS</span>(학생수계),</span>
<span id="cb22-5"><a href="fable-framework.html#cb22-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">arima =</span> <span class="fu">ARIMA</span>(학생수계),</span>
<span id="cb22-6"><a href="fable-framework.html#cb22-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">naive =</span> <span class="fu">NAIVE</span>(학생수계),</span>
<span id="cb22-7"><a href="fable-framework.html#cb22-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">tslm =</span> <span class="fu">TSLM</span>(학생수계 <span class="sc">~</span> <span class="fu">trend</span>()),</span>
<span id="cb22-8"><a href="fable-framework.html#cb22-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">rw =</span> <span class="fu">RW</span>(학생수계),</span>
<span id="cb22-9"><a href="fable-framework.html#cb22-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean =</span> <span class="fu">MEAN</span>(학생수계),</span>
<span id="cb22-10"><a href="fable-framework.html#cb22-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">nnetar =</span> <span class="fu">NNETAR</span>(학생수계),</span>
<span id="cb22-11"><a href="fable-framework.html#cb22-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">prophet =</span> <span class="fu">prophet</span>(학생수계)</span>
<span id="cb22-12"><a href="fable-framework.html#cb22-12" aria-hidden="true" tabindex="-1"></a>         )</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>fable</code>과 <code>fable.prophet</code> 패키지를 로딩 code 3 : <code>model()</code>함수에 총 8개의 모델이 담긴 데이터프레임을 만듬.</li>
<li>컬럼명은 ets, arima, naive, tslm, rw, mean, nnetar, prophet으로 설정하여 model.fable.students 객체 생성. TSLM 모델에는 추세를 반영해 줌</li>
</ul></li>
</ul>
</div>
<p>위에서 생성한 model.fable.students 객체를 <code>forecast()</code> 함수에 전달하여 예측 결과를 생성한다. <code>h</code> 매개변수로 예측기간을 설정한다.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="fable-framework.html#cb23-1" aria-hidden="true" tabindex="-1"></a>forecast.fable.students <span class="ot">&lt;-</span> <span class="fu">forecast</span>(model.fable.students, <span class="at">h =</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>forecast()</code> 함수에 예측에 사용할 모델 데이터프레임(model.fable.students)과 예측기간을 10년(<code>h = 10</code>)으로 설정하여 결과를 forecast.fable.students에 저장</li>
</ul></li>
</ul>
</div>
<p><code>autoplot()</code>에 <code>forecast()</code> 결과, 원본 데이터, 레벨 매개변수를 사용하여 plot을 생성한다.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="fable-framework.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(forecast.fable.students, students.tsibble, <span class="at">level =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="t_files/figure-html/fable_students3-1.png" width="672" /></p>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>autoplot()</code> 함수에 plot을 생성할 forecast 결과, 원본데이터, 레벨 생략(level = NULL)을 전달하여 plot을 생성</li>
</ul></li>
</ul>
</div>
<p>생성한 모델들의 성능측정 지수를 확인하기 위해 forecast 결과를 accuracy() 매개변수로 전달한다. 성능측정에 사용하기 위해 생성해놓았던 전체 데이터의 20% 테스트 데이터 셋을 사용하여 성능측정 지수를 산출한다.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="fable-framework.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(forecast.fable.students, students.tsibble.test) <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="fable-framework.html#cb25-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(RMSE)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 10
##   .model  .type        ME     RMSE      MAE      MPE   MAPE  MASE RMSSE    ACF1
##   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 ets     Test     -5862.   17477.   16449.  -0.0862  0.263   NaN   NaN -0.0726
## 2 prophet Test    102129.  121700.  102129.   1.66    1.66    NaN   NaN  0.294 
## 3 arima   Test   -155457.  173482.  155457.  -2.51    2.51    NaN   NaN  0.443 
## 4 nnetar  Test   -449544.  498844.  449544.  -7.27    7.27    NaN   NaN  0.416 
## 5 tslm    Test   -499968.  505229.  499968.  -7.99    7.99    NaN   NaN  0.427 
## 6 naive   Test   -508685.  555965.  508685.  -8.21    8.21    NaN   NaN  0.413 
## 7 rw      Test   -508685.  555965.  508685.  -8.21    8.21    NaN   NaN  0.413 
## 8 mean    Test  -1683488. 1698372. 1683488. -26.9    26.9     NaN   NaN  0.413</code></pre>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>accuracy()</code> 함수에 forecast 결과, 테스트 데이터 셋인 students.tsibble.test를 사용하여 성능측정 지수 데이터프레임을 생성하고 RMSE(<code>arrange(RMSE)</code>)를 기준으로 정렬</li>
</ul></li>
</ul>
</div>
<p>성능측정 지수들 중에 가장 성능이 좋은 모델 2개를 선택하여 베스트 모델 데이터프레임을 생성한다.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="fable-framework.html#cb27-1" aria-hidden="true" tabindex="-1"></a>best.model.fable.students <span class="ot">&lt;-</span> model.fable.students <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="fable-framework.html#cb27-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(ets, prophet)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>RMSE 값이 가장 작은 2개의 모델인 ets, prophet모델을 <code>select()</code>를 사용해 best.model.fable.students에 저장한다.</li>
</ul></li>
</ul>
</div>
<p>가장 좋은 모델로 평가된 모델의 예측치를 다시 산출하고 이 결과를 사용하여 plot을 생성한다. 생성할 때는 원본 데이터를 같이 넣어주어야 데이터의 흐름을 파악하기 쉽고 모델에 의해 생성되는 적합값을 같이 plotting해주면 전반적인 모델의 예측력을 눈으로 확인할 수 있다. plot을 보다 보기편하게 하기 위해 plot 제목과 축 제목들을 설정해 주는 것이 좋겠다. autoplot()는 ggplot2를 기반으로 생성된 plot이기 때문에 ggplot2의 plot 생성방법을 사용하면 plot을 원하는 대로 꾸밀 수 있다.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="fable-framework.html#cb28-1" aria-hidden="true" tabindex="-1"></a>best.model.fable.students <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="fable-framework.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(students.tsibble, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb28-3"><a href="fable-framework.html#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">fitted</span>(best.model.fable.students)) <span class="sc">+</span></span>
<span id="cb28-4"><a href="fable-framework.html#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> index, <span class="at">y =</span> 학생수계))</span></code></pre></div>
<p><img src="t_files/figure-html/fable_students6-1.png" width="672" /></p>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><p><code>forecast()</code>를 사용하여 RMSE가 가장 작은 ets, prophet모델이 저장된 best.model.fable.students를 사용하여 10년치 데이터를 예측(<code>h = 10</code>)</p></li>
<li><p><code>autoplot()</code>를 사용하여 원본 데이터와 예측치 데이터의 plot을 만들고 best.model.fable.students에 저장된 ets, prophet 모델의 적합치를 같이 plotting함.</p></li>
<li><p><code>geom_point</code>를 사용하여 원본데이터에 point를 찍어줌.</p></li>
</ul></li>
</ul>
</div>
</div>
<div id="미래-취업자수-예측" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> 미래 취업자수 예측</h3>
<p>fable 프레임워크를 사용하여 전체 취업자 수를 예측해보자.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="fable-framework.html#cb29-1" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>yearmonth <span class="ot">&lt;-</span> <span class="fu">yearmonth</span>(employees<span class="sc">$</span>time)</span>
<span id="cb29-2"><a href="fable-framework.html#cb29-2" aria-hidden="true" tabindex="-1"></a>employees.tsibble <span class="ot">&lt;-</span> <span class="fu">as_tsibble</span>(employees, <span class="at">index =</span> yearmonth)</span></code></pre></div>
<p>순서에 따라 먼저 트레이닝 데이터 셋과 테스트 데이터 셋을 나눈다. 나누는 비율은 90:10의 비율로 나누었다.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="fable-framework.html#cb30-1" aria-hidden="true" tabindex="-1"></a>split <span class="ot">&lt;-</span> <span class="fu">floor</span>(<span class="fu">nrow</span>(employees.tsibble) <span class="sc">*</span> <span class="fl">0.9</span>)</span>
<span id="cb30-2"><a href="fable-framework.html#cb30-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(employees.tsibble)</span>
<span id="cb30-3"><a href="fable-framework.html#cb30-3" aria-hidden="true" tabindex="-1"></a>employees.tsibble.tr <span class="ot">&lt;-</span> employees.tsibble[<span class="dv">1</span><span class="sc">:</span>split, ]</span>
<span id="cb30-4"><a href="fable-framework.html#cb30-4" aria-hidden="true" tabindex="-1"></a>employees.tsibble.test <span class="ot">&lt;-</span> employees.tsibble[(split<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span>n, ]</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><p><code>floor</code>, <code>nrow</code>를 사용하여 employees.tsibble 행갯수(<code>nrow</code>)의 0.8을 곱한 값의 내림값(<code>floor</code>)을 구해 90:10으로 나눌 위치를 split에 저장</p></li>
<li><p><code>nrow</code>를 사용하여 employees.tsibble의 1열부터 split열까지를 employees.tsibble.tr로 저장</p></li>
<li><p>employees.tsibble의 split+1열부터 마지막 열까지를 employees.tsibble.test로 저장</p></li>
</ul></li>
</ul>
</div>
<p><code>model()</code>에 앞에서 생성한 트레이닝 데이터 셋과 만들고 싶은 모델 함수를 사용하여 모델 데이터프레임를 만든다. 아래에서는 ets, arima, naive, tslm, rw, mean, nnetar, prophet의 8가지 모델을 만들었는데 아래의 코드는 tidy 데이터 객체의 특성을 활용하기 위해 파이프라인(<code>%&gt;%</code>)을 사용하였다. 그리고 취업자 데이터는 계절성이 존재하기 때문에 선형 모델에 추세와 계절성을 추가하였다.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="fable-framework.html#cb31-1" aria-hidden="true" tabindex="-1"></a> model.fable.employees <span class="ot">&lt;-</span> employees.tsibble.tr <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="fable-framework.html#cb31-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">model</span>(<span class="at">ets =</span> <span class="fu">ETS</span>(total),</span>
<span id="cb31-3"><a href="fable-framework.html#cb31-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">arima =</span> <span class="fu">ARIMA</span>(total),</span>
<span id="cb31-4"><a href="fable-framework.html#cb31-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">naive =</span> <span class="fu">NAIVE</span>(total),</span>
<span id="cb31-5"><a href="fable-framework.html#cb31-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">tslm =</span> <span class="fu">TSLM</span>(total<span class="sc">~</span><span class="fu">trend</span>() <span class="sc">+</span> <span class="fu">season</span>(<span class="dv">12</span>)),</span>
<span id="cb31-6"><a href="fable-framework.html#cb31-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">rw =</span> <span class="fu">RW</span>(total),</span>
<span id="cb31-7"><a href="fable-framework.html#cb31-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">MEAN</span>(total),</span>
<span id="cb31-8"><a href="fable-framework.html#cb31-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">nnetar =</span> <span class="fu">NNETAR</span>(total),</span>
<span id="cb31-9"><a href="fable-framework.html#cb31-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">prophet =</span> <span class="fu">prophet</span>(total)</span>
<span id="cb31-10"><a href="fable-framework.html#cb31-10" aria-hidden="true" tabindex="-1"></a>         )</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>model()</code>을 사용해 8가지 모델을 생성. m<code>odel()</code>의 호출은 employees.tsibble.tr 데이터를 첫번째 매개변수로 사용하기 위해 <code>%&gt;%</code>을 사용하여 전달.</li>
<li>실행 결과는 model.fable.employees에 저장.</li>
</ul></li>
</ul>
</div>
<p>앞에서 생성한 model.fable.employees을 <code>forecast()</code>를 사용하여 24개월 미래 데이터를 예측한다.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="fable-framework.html#cb32-1" aria-hidden="true" tabindex="-1"></a>forecast.fable.employees <span class="ot">&lt;-</span> model.fable.employees <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">24</span>)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>model.fable.employees를 <code>%&gt;%</code>을 이용하여 <code>forecast()</code>의 첫번째 매개변수로 전달. <code>forecast()</code>의 예측기간을 설정하기 위해 <code>h = 24</code>를 설정.</li>
<li>실행 결과는 forecast.fable.employees에 저장.</li>
</ul></li>
</ul>
</div>
<p>예측된 데이터를 사용하여 plot을 만들고 각각의 모델에서 산출한 미래 예측치를 살펴본다.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="fable-framework.html#cb33-1" aria-hidden="true" tabindex="-1"></a>forecast.fable.employees <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(employees.tsibble, <span class="at">level =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="t_files/figure-html/fable_employees3-1.png" width="672" /></p>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>forecast()</code>로 예측한 24개월이후 결과가 저장된 forecast.fable.employees를 <code>%&gt;%</code>로 <code>autoplot()</code>으로 전달해서 plot을 생성.</li>
</ul></li>
</ul>
</div>
<p>육안으로는 어느 모델이 우수한지 알아보기가 힘들다. 따라서 성능측정 지수를 확인해서 가장 성능이 좋은 모델을 선택한다</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="fable-framework.html#cb34-1" aria-hidden="true" tabindex="-1"></a>forecast.fable.employees <span class="sc">%&gt;%</span> <span class="fu">accuracy</span>(employees.tsibble.test) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(RMSE)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 10
##   .model  .type     ME  RMSE   MAE    MPE  MAPE  MASE RMSSE    ACF1
##   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 naive   Test    83.4  259.  247.  0.301 0.917   NaN   NaN  0.203 
## 2 rw      Test    83.4  259.  247.  0.301 0.917   NaN   NaN  0.203 
## 3 mean    Test   560.   611.  560.  2.07  2.07    NaN   NaN  0.203 
## 4 tslm    Test  -728.   738.  728. -2.70  2.70    NaN   NaN -0.366 
## 5 ets     Test  -730.   740.  730. -2.71  2.71    NaN   NaN -0.0628
## 6 prophet Test  -827.   839.  827. -3.07  3.07    NaN   NaN -0.396 
## 7 arima   Test  -833.   840.  833. -3.10  3.10    NaN   NaN -0.289 
## 8 nnetar  Test  -831.   912.  831. -3.09  3.09    NaN   NaN  0.497</code></pre>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>forecast()</code>로 예측한 24개월이후 결과가 저장된 forecast.fable.employees를 <code>%&gt;%</code>로 <code>accuracy()</code>로 전달해서 성능측정 지수를 산출.</li>
<li>성능측정 지수를 산출하는 데이터는 테스트 데이터 셋을 사용하고 결과를 RMSE로 정렬한 결과를 출력.</li>
</ul></li>
</ul>
</div>
<p>화면에 출력된 성능측정 지수를 확인하여 가장 좋은 모델 2가지를 가지는 데이터프레임을 만들어준다.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="fable-framework.html#cb36-1" aria-hidden="true" tabindex="-1"></a>best.model.fable.employees <span class="ot">&lt;-</span> model.fable.employees <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="fable-framework.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(naive, rw)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>여러가지 모델을 만들어 담아놓은 model.fable.employees 데이터프레임에서 RMSE가 가장 작은 두 모델인 naive와 rw모델을 <code>select()</code>를 사용하여 best.model.fable.employees에 저장.</li>
</ul></li>
</ul>
</div>
<p>가장 좋은 모델로 평가된 모델의 예측치를 다시 산출하고 이 결과를 사용하여 plot을 생성한다. 앞에서 설명했 듯이 plot 생성시에는 원본 데이터와 모델의 적합값을 를 같이 넣어주는 게 좋고 plot을 보다 보기편하게 하기 위해 plot 제목과 축 제목들을 설정해 주는 것이 좋다.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="fable-framework.html#cb37-1" aria-hidden="true" tabindex="-1"></a>best.model.fable.employees <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="fable-framework.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="fable-framework.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(employees.tsibble, <span class="at">level =</span> <span class="cn">NULL</span>, <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb37-4"><a href="fable-framework.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">fitted</span>(best.model.fable.employees), <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb37-5"><a href="fable-framework.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> yearmonth, <span class="at">y =</span> total)) <span class="sc">+</span></span>
<span id="cb37-6"><a href="fable-framework.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;전체 취업자수 예측&#39;</span>, <span class="at">x =</span> <span class="st">&#39;년월&#39;</span>, <span class="at">y =</span> <span class="st">&#39;취업자수&#39;</span>)</span></code></pre></div>
<p><img src="t_files/figure-html/fable_employees6-1.png" width="672" /></p>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>가장 RMSE가 낮은 두 모델이 담긴 best.model.fable.employees을 <code>%&gt;%</code>을 사용하여 <code>forecast()</code>에 전달.</li>
<li><code>forecast()</code> 결과를 %&gt;%를 사용하여 <code>autoplot()</code>에 전달하는데 원본데이터를 같이 plot하기 위해 원본데이터인 employees.tsibble을 넣어주고 여러 모델 plot이 겹치기 때문에 <code>level = NULL</code>로 설정, 예측치 라인을 좀 두껍게 해주기 위해 <code>lwd = 1</code>로 설정.</li>
<li><code>autolayer()</code>를 사용하여 두가지 모델의 적합값(<code>fitted(best.model.fable.employees)</code>)을 그려주고 예측라인의 두께를 설정(<code>lwd = 1</code>).</li>
<li><code>geom_point()</code>로 원본데이터들의 정확한 지점을 표기. <code>labs()</code>를 사용하여 plot 제목과 축제목을 설정.</li>
</ul></li>
</ul>
</div>
</div>
<div id="미래-코로나-확진자수-예측" class="section level3" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> 미래 코로나 확진자수 예측</h3>
<p>0~9세의 코로나 확진자수를 사용하여 미래 코로나 확진자 수를 예측해본다. 앞의 두 예제와 달리 코로나 확진자수는 일별데이터인데 중간중간 데이터가 빠진 날이 있다. 예측을 위해서는 빠진 날짜의 데이터를 채워주어야 하는데 여기서는 빠진 날짜의 데이터를 0으로 채워 넣었다.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="fable-framework.html#cb38-1" aria-hidden="true" tabindex="-1"></a>fill.covid19.by.age.tsibble <span class="ot">&lt;-</span> <span class="fu">fill_gaps</span>(wide.covid19.by.age.tsibble, <span class="st">`</span><span class="at">0-9세</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">0</span>)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>fill_gaps()</code>는 결측치를 채워주는 함수로 여기서는 wide.covid19.by.age.tsibble의 0-9세 컬럼의 결측치를 0으로 채움.</li>
<li>결과를 fill.covid19.by.age.tsibble에 저장</li>
</ul></li>
</ul>
</div>
<p>fill.covid19.by.age.tsibble을 트레이닝 셋과 테스트 셋으로 분리한다. 분리비율은 9:1로 설정하였다. 분리비율은 정해진 값은 없기 때문에 분석자가 데이터를 분석하기 위한 적절한 비율을 선택한다.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="fable-framework.html#cb39-1" aria-hidden="true" tabindex="-1"></a>split <span class="ot">&lt;-</span> <span class="fu">floor</span>(<span class="fu">nrow</span>(fill.covid19.by.age.tsibble) <span class="sc">*</span> <span class="fl">0.9</span>)</span>
<span id="cb39-2"><a href="fable-framework.html#cb39-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(fill.covid19.by.age.tsibble)</span>
<span id="cb39-3"><a href="fable-framework.html#cb39-3" aria-hidden="true" tabindex="-1"></a>fill.covid19.by.age.tsibble.tr <span class="ot">&lt;-</span> fill.covid19.by.age.tsibble[<span class="dv">1</span><span class="sc">:</span>split, ]</span>
<span id="cb39-4"><a href="fable-framework.html#cb39-4" aria-hidden="true" tabindex="-1"></a>fill.covid19.by.age.tsibble.test <span class="ot">&lt;-</span> fill.covid19.by.age.tsibble[(split<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span>n, ]</span></code></pre></div>
<p>앞선 예제들과 같이 8개의 모델을 생성한다.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="fable-framework.html#cb40-1" aria-hidden="true" tabindex="-1"></a>model.covid19.by.age.tsibble <span class="ot">&lt;-</span> fill.covid19.by.age.tsibble.tr <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="fable-framework.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">ets =</span> <span class="fu">ETS</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span>),</span>
<span id="cb40-3"><a href="fable-framework.html#cb40-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">arima =</span> <span class="fu">ARIMA</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span>),</span>
<span id="cb40-4"><a href="fable-framework.html#cb40-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">naive =</span> <span class="fu">NAIVE</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span>),</span>
<span id="cb40-5"><a href="fable-framework.html#cb40-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">tslm =</span> <span class="fu">TSLM</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span>),</span>
<span id="cb40-6"><a href="fable-framework.html#cb40-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">rw =</span> <span class="fu">RW</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span>),</span>
<span id="cb40-7"><a href="fable-framework.html#cb40-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean =</span> <span class="fu">MEAN</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span>),</span>
<span id="cb40-8"><a href="fable-framework.html#cb40-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">nnetar =</span> <span class="fu">NNETAR</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span>),</span>
<span id="cb40-9"><a href="fable-framework.html#cb40-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">prophet =</span> <span class="fu">prophet</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span>)</span>
<span id="cb40-10"><a href="fable-framework.html#cb40-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>각각의 모델 생성 함수에 예측하기를 원하는 컬럼인 ’0-9세’컬럼을 설정. 생성된 결과는 model.covid19.by.age.tsibble에 저장</li>
</ul></li>
</ul>
</div>
<p>생성된 모델을 사용하여 <code>forecast()</code>를 사용하여 예측 결과를 산출한다.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="fable-framework.html#cb41-1" aria-hidden="true" tabindex="-1"></a>forecast.covid19.by.age.tsibble <span class="ot">&lt;-</span> model.covid19.by.age.tsibble <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="fable-framework.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">120</span>)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>model.covid19.by.age.tsibble를 <code>%&gt;%</code>을 사용하여 <code>forecast()</code>에 전달하는데 120일 이후 데이터를 예측하기 위해 <code>h = 120</code>을 설정.</li>
<li>결과는 forecast.covid19.by.age.tsibble에 저장</li>
</ul></li>
</ul>
</div>
<p>예측결과를 확인하기 위해 plot을 생성한다. 여러 plot이 겹치기 때문에 다소 보기는 힘들다.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="fable-framework.html#cb42-1" aria-hidden="true" tabindex="-1"></a>forecast.covid19.by.age.tsibble <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(fill.covid19.by.age.tsibble, <span class="at">level =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="t_files/figure-html/fable_covid5-1.png" width="672" /></p>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>forecast() 결과를 %&gt;%을 사용하여 autoplot()에 전달.</li>
<li>autoplot()는 원본데이터를 같이 plot하고 예측 범위를 제거</li>
</ul></li>
</ul>
</div>
<p>육안으로는 가장 좋은 모델 선정이 어렵기 때문에 성능측정 지수를 확인한다.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="fable-framework.html#cb43-1" aria-hidden="true" tabindex="-1"></a>forecast.covid19.by.age.tsibble <span class="sc">%&gt;%</span> <span class="fu">accuracy</span>(fill.covid19.by.age.tsibble.test) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(RMSE)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 10
##   .model  .type     ME  RMSE   MAE    MPE  MAPE  MASE RMSSE  ACF1
##   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 prophet Test   -6.33  10.5  8.89  -39.0  46.6   NaN   NaN 0.371
## 2 naive   Test   -8.39  11.4 10     -51.7  55.8   NaN   NaN 0.234
## 3 rw      Test   -8.39  11.4 10     -51.7  55.8   NaN   NaN 0.234
## 4 ets     Test  -12.4   14.6 13.1   -70.9  72.4   NaN   NaN 0.234
## 5 mean    Test   15.6   17.4 15.6    61.8  61.8   NaN   NaN 0.234
## 6 tslm    Test   15.6   17.4 15.6    61.8  61.8   NaN   NaN 0.234
## 7 arima   Test  -16.8   18.7 16.9   -92.1  92.5   NaN   NaN 0.281
## 8 nnetar  Test  -22.0   23.7 22.0  -118.  118.    NaN   NaN 0.340</code></pre>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>forecast()</code>로 예측한 120일이후 결과가 저장된 forecast.covid19.by.age.tsibble를 <code>%&gt;%</code>로 <code>accuracy()</code>로 전달해서 성능측정 지수를 산출.</li>
<li>성능측정 지수를 산출하는 데이터는 테스트 데이터 셋을 사용하고 결과를 RMSE로 정렬한 결과를 출력.</li>
</ul></li>
</ul>
</div>
<p>성능측정 지수가 가장 좋은 모델을 선택한다.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="fable-framework.html#cb45-1" aria-hidden="true" tabindex="-1"></a>best.model.covid19.by.age.tsibble <span class="ot">&lt;-</span> model.covid19.by.age.tsibble <span class="sc">%&gt;%</span> <span class="fu">select</span>(prophet)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>8가지 모델이 저장되어 있는 model.covid19.by.age.tsibble에서 가장 좋은 성능(RMSE값이 가장 작은)인 prophet모델을 선택하여 best.model.covid19.by.age.tsibble에 저장</li>
</ul></li>
</ul>
</div>
<p>선정된 베스트 모델의 예측 plot을 생성하여 전체 데이터와 예측데이터를 살펴본다.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="fable-framework.html#cb46-1" aria-hidden="true" tabindex="-1"></a>best.model.covid19.by.age.tsibble <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="fable-framework.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">120</span>) <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="fable-framework.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(fill.covid19.by.age.tsibble, <span class="at">lwd =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb46-4"><a href="fable-framework.html#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">fitted</span>(best.model.covid19.by.age.tsibble), <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb46-5"><a href="fable-framework.html#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> <span class="st">`</span><span class="at">0-9세</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb46-6"><a href="fable-framework.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;코로나 확진자수 예측&#39;</span>, <span class="at">x =</span> <span class="st">&#39;년월일&#39;</span>, <span class="at">y =</span> <span class="st">&#39;확진자수&#39;</span>)</span></code></pre></div>
<p><img src="t_files/figure-html/fable_covid8-1.png" width="672" /></p>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>가장 RMSE가 낮은 두 모델이 담긴 best.model.covid19.by.age.tsibble <code>%&gt;%</code>을 사용하여 <code>forecast()</code>에 전달.</li>
<li><code>forecast()</code> 결과를 <code>%&gt;%</code>를 사용하여 <code>autoplot()</code>에 전달하는데 원본데이터를 같이 plot하기 위해 원본데이터인 fill.covid19.by.age.tsibble 넣어주고 예측 범위를 투명하게 설정하기 위해 <code>alpha = 0.6</code>로 설정, 예측치 라인을 좀 두껍게 해주기 위해 <code>lwd = 1</code>로 설정.</li>
<li><code>autolayer()</code>를 사용하여 두가지 모델의 적합값(<code>fitted(best.model.covid19.by.age.tsibble)</code>)을 그려주고 예측라인의 두께를 설정(<code>lwd = 1</code>).</li>
<li><code>geom_point()</code>로 원본데이터들의 정확한 지점을 표기.</li>
<li><code>labs()</code>를 사용하여 plot 제목과 축제목을 설정.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p>tidy 데이터의 특징과 활용방법은 <a href="https://statkclee.github.io/data-science/data-handling-tidyr.html">[https://statkclee.github.io/data-science/data-handling-tidyr.html](https://statkclee.github.io/data-science/data-handling-tidyr.htmldmf)</a>을 참조하라<a href="fable-framework.html#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="성능분석-지수.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modeltime.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["t.pdf", "t.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
