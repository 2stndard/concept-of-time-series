<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.3 시계열 데이터 Import | Untitled</title>
  <meta name="description" content="2.3 시계열 데이터 Import | Untitled" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="2.3 시계열 데이터 Import | Untitled" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.3 시계열 데이터 Import | Untitled" />
  
  
  

<meta name="author" content="이기준" />


<meta name="date" content="2021-03-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="시계열-데이터-객체object.html"/>
<link rel="next" href="시계열-visualization.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">교육, 고용, 코로나 데이터를 활용한 시계열 데이터 분석 in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 시계열 데이터</a>
<ul>
<li class="chapter" data-level="1.1" data-path="시계열-데이터란.html"><a href="시계열-데이터란.html"><i class="fa fa-check"></i><b>1.1</b> 시계열 데이터란?</a></li>
<li class="chapter" data-level="1.2" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html"><i class="fa fa-check"></i><b>1.2</b> 시계열 데이터의 특성</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#고정된-시간-독립변수"><i class="fa fa-check"></i><b>1.2.1</b> 고정된 시간 독립변수</a></li>
<li class="chapter" data-level="1.2.2" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#자기-상관관계"><i class="fa fa-check"></i><b>1.2.2</b> 자기 상관관계</a></li>
<li class="chapter" data-level="1.2.3" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#추세-경향성trend"><i class="fa fa-check"></i><b>1.2.3</b> 추세 경향성(Trend)</a></li>
<li class="chapter" data-level="1.2.4" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#계절성seasonality-순환성cyclic"><i class="fa fa-check"></i><b>1.2.4</b> 계절성(Seasonality), 순환성(Cyclic)</a></li>
<li class="chapter" data-level="1.2.5" data-path="시계열-데이터의-특성.html"><a href="시계열-데이터의-특성.html#불확실성uncertainty"><i class="fa fa-check"></i><b>1.2.5</b> 불확실성(Uncertainty)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="시계열-데이터-타입-및-import.html"><a href="시계열-데이터-타입-및-import.html"><i class="fa fa-check"></i><b>2</b> 시계열 데이터 타입 및 Import</a>
<ul>
<li class="chapter" data-level="2.1" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html"><i class="fa fa-check"></i><b>2.1</b> 날짜/시간 데이터 클래스</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#date-클래스"><i class="fa fa-check"></i><b>2.1.1</b> date 클래스</a></li>
<li class="chapter" data-level="2.1.2" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#posixct-posixlt-data-class"><i class="fa fa-check"></i><b>2.1.2</b> POSIXct, POSIXlt data class</a></li>
<li class="chapter" data-level="2.1.3" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#yearmon-yearqtr-class"><i class="fa fa-check"></i><b>2.1.3</b> yearmon, yearqtr class</a></li>
<li class="chapter" data-level="2.1.4" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#날짜-시간-포맷"><i class="fa fa-check"></i><b>2.1.4</b> 날짜, 시간 포맷</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="시계열-데이터-객체object.html"><a href="시계열-데이터-객체object.html"><i class="fa fa-check"></i><b>2.2</b> 시계열 데이터 객체(Object)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="시계열-데이터-객체object.html"><a href="시계열-데이터-객체object.html#ts-r-basestats"><i class="fa fa-check"></i><b>2.2.1</b> ts : R base(stats)</a></li>
<li class="chapter" data-level="2.2.2" data-path="시계열-데이터-객체object.html"><a href="시계열-데이터-객체object.html#xts"><i class="fa fa-check"></i><b>2.2.2</b> xts</a></li>
<li class="chapter" data-level="2.2.3" data-path="시계열-데이터-객체object.html"><a href="시계열-데이터-객체object.html#tsibble"><i class="fa fa-check"></i><b>2.2.3</b> tsibble</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="시계열-데이터-import.html"><a href="시계열-데이터-import.html"><i class="fa fa-check"></i><b>2.3</b> 시계열 데이터 Import</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="시계열-데이터-import.html"><a href="시계열-데이터-import.html#엑셀-파일"><i class="fa fa-check"></i><b>2.3.1</b> 엑셀 파일</a></li>
<li class="chapter" data-level="2.3.2" data-path="시계열-데이터-import.html"><a href="시계열-데이터-import.html#csv-파일"><i class="fa fa-check"></i><b>2.3.2</b> CSV 파일</a></li>
<li class="chapter" data-level="2.3.3" data-path="시계열-데이터-import.html"><a href="시계열-데이터-import.html#추가-실습-데이터-생성"><i class="fa fa-check"></i><b>2.3.3</b> 추가 실습 데이터 생성</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="시계열-visualization.html"><a href="시계열-visualization.html"><i class="fa fa-check"></i><b>3</b> 시계열 Visualization</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-frame-ggplot2-패키지.html"><a href="data-frame-ggplot2-패키지.html"><i class="fa fa-check"></i><b>3.1</b> data.frame : ggplot2 패키지</a></li>
<li class="chapter" data-level="3.2" data-path="xts-xts-패키지.html"><a href="xts-xts-패키지.html"><i class="fa fa-check"></i><b>3.2</b> xts : xts 패키지</a></li>
<li class="chapter" data-level="3.3" data-path="ts-forecast-패키지.html"><a href="ts-forecast-패키지.html"><i class="fa fa-check"></i><b>3.3</b> ts : forecast 패키지</a></li>
<li class="chapter" data-level="3.4" data-path="tsibble-feasts-패키지.html"><a href="tsibble-feasts-패키지.html"><i class="fa fa-check"></i><b>3.4</b> tsibble : feasts 패키지</a></li>
<li class="chapter" data-level="3.5" data-path="data-frame-timetk-패키지.html"><a href="data-frame-timetk-패키지.html"><i class="fa fa-check"></i><b>3.5</b> data.frame : timetk 패키지</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="시계열-데이터-handling.html"><a href="시계열-데이터-handling.html"><i class="fa fa-check"></i><b>4</b> 시계열 데이터 Handling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="오늘-몇일이야-시간-정보-추출.html"><a href="오늘-몇일이야-시간-정보-추출.html"><i class="fa fa-check"></i><b>4.1</b> 오늘 몇일이야? : 시간 정보 추출</a></li>
<li class="chapter" data-level="4.2" data-path="몇일-지났어-시간-기간-연산.html"><a href="몇일-지났어-시간-기간-연산.html"><i class="fa fa-check"></i><b>4.2</b> 몇일 지났어? : 시간 기간 연산</a></li>
<li class="chapter" data-level="4.3" data-path="이번주-마지막날은-몇일이야-시간-반올림.html"><a href="이번주-마지막날은-몇일이야-시간-반올림.html"><i class="fa fa-check"></i><b>4.3</b> 이번주 마지막날은 몇일이야? : 시간 반올림</a></li>
<li class="chapter" data-level="4.4" data-path="주간-월간-데이터-합계-평균은-시간-grouping.html"><a href="주간-월간-데이터-합계-평균은-시간-grouping.html"><i class="fa fa-check"></i><b>4.4</b> 주간, 월간 데이터 합계, 평균은? : 시간 Grouping</a></li>
<li class="chapter" data-level="4.5" data-path="주식-시가-고가-저가-종가는-어떻게-구해-ohlc.html"><a href="주식-시가-고가-저가-종가는-어떻게-구해-ohlc.html"><i class="fa fa-check"></i><b>4.5</b> 주식 시가, 고가, 저가, 종가는 어떻게 구해? : OHLC</a></li>
<li class="chapter" data-level="4.6" data-path="일-평균-5일-합계는-시간-rolling.html"><a href="일-평균-5일-합계는-시간-rolling.html"><i class="fa fa-check"></i><b>4.6</b> 3일 평균, 5일 합계는? : 시간 Rolling</a></li>
<li class="chapter" data-level="4.7" data-path="지난달-데이터는-시간-filteringsubsetting.html"><a href="지난달-데이터는-시간-filteringsubsetting.html"><i class="fa fa-check"></i><b>4.7</b> 지난달 데이터는? : 시간 Filtering(Subsetting)</a></li>
<li class="chapter" data-level="4.8" data-path="월별-분기별-연별-증감량.html"><a href="월별-분기별-연별-증감량.html"><i class="fa fa-check"></i><b>4.8</b> 월별, 분기별, 연별 증감량</a></li>
<li class="chapter" data-level="4.9" data-path="월-비중-백분율-연-비중-백분율.html"><a href="월-비중-백분율-연-비중-백분율.html"><i class="fa fa-check"></i><b>4.9</b> 월 비중 백분율, 연 비중 백분율</a></li>
<li class="chapter" data-level="4.10" data-path="월별-분기별-연별-누적합계.html"><a href="월별-분기별-연별-누적합계.html"><i class="fa fa-check"></i><b>4.10</b> 월별, 분기별, 연별 누적합계</a></li>
<li class="chapter" data-level="4.11" data-path="동월별-동분기별-동년별-plot.html"><a href="동월별-동분기별-동년별-plot.html"><i class="fa fa-check"></i><b>4.11</b> 동월별, 동분기별, 동년별 Plot</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="시계열-forecasting-part-i-기초컨셉.html"><a href="시계열-forecasting-part-i-기초컨셉.html"><i class="fa fa-check"></i><b>5</b> 시계열 forecasting Part I - 기초컨셉</a>
<ul>
<li class="chapter" data-level="5.1" data-path="정상성stationary-비정상성non-stationary.html"><a href="정상성stationary-비정상성non-stationary.html"><i class="fa fa-check"></i><b>5.1</b> 정상성(Stationary), 비정상성(Non-Stationary)</a></li>
<li class="chapter" data-level="5.2" data-path="지연lag와-차분difference.html"><a href="지연lag와-차분difference.html"><i class="fa fa-check"></i><b>5.2</b> 지연(Lag)와 차분(Difference)</a></li>
<li class="chapter" data-level="5.3" data-path="acf와-pacf.html"><a href="acf와-pacf.html"><i class="fa fa-check"></i><b>5.3</b> ACF와 PACF</a></li>
<li class="chapter" data-level="5.4" data-path="적합값fitted-value-와-잔차residuals.html"><a href="적합값fitted-value-와-잔차residuals.html"><i class="fa fa-check"></i><b>5.4</b> 적합값(fitted value) 와 잔차(residuals)</a></li>
<li class="chapter" data-level="5.5" data-path="백색-잡음white-noise.html"><a href="백색-잡음white-noise.html"><i class="fa fa-check"></i><b>5.5</b> 백색 잡음(White Noise)</a></li>
<li class="chapter" data-level="5.6" data-path="시계열-분해decomposition.html"><a href="시계열-분해decomposition.html"><i class="fa fa-check"></i><b>5.6</b> 시계열 분해(Decomposition)</a></li>
<li class="chapter" data-level="5.7" data-path="정상성-테스트.html"><a href="정상성-테스트.html"><i class="fa fa-check"></i><b>5.7</b> 정상성 테스트</a></li>
<li class="chapter" data-level="5.8" data-path="계절성-검정.html"><a href="계절성-검정.html"><i class="fa fa-check"></i><b>5.8</b> 계절성 검정</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="시계열-forecasting-part-ii-시계열-예측-모델.html"><a href="시계열-forecasting-part-ii-시계열-예측-모델.html"><i class="fa fa-check"></i><b>6</b> 시계열 forecasting Part II - 시계열 예측 모델</a>
<ul>
<li class="chapter" data-level="6.1" data-path="평균-모델.html"><a href="평균-모델.html"><i class="fa fa-check"></i><b>6.1</b> 평균 모델</a></li>
<li class="chapter" data-level="6.2" data-path="단순naive-모델.html"><a href="단순naive-모델.html"><i class="fa fa-check"></i><b>6.2</b> 단순(Naive) 모델</a></li>
<li class="chapter" data-level="6.3" data-path="계절성-단순seasonal-naive-모델.html"><a href="계절성-단순seasonal-naive-모델.html"><i class="fa fa-check"></i><b>6.3</b> 계절성 단순(Seasonal Naive) 모델</a></li>
<li class="chapter" data-level="6.4" data-path="random-walk-모델.html"><a href="random-walk-모델.html"><i class="fa fa-check"></i><b>6.4</b> Random Walk 모델</a></li>
<li class="chapter" data-level="6.5" data-path="regression-모델.html"><a href="regression-모델.html"><i class="fa fa-check"></i><b>6.5</b> Regression 모델</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="regression-모델.html"><a href="regression-모델.html#forecasttslm"><i class="fa fa-check"></i><b>6.5.1</b> forecast::tslm()</a></li>
<li class="chapter" data-level="6.5.2" data-path="regression-모델.html"><a href="regression-모델.html#timetkplot_time_series_regression"><i class="fa fa-check"></i><b>6.5.2</b> timetk::plot_time_series_regression</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html"><i class="fa fa-check"></i><b>6.6</b> 지수 평활(Exponential Smoothing) 모델</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#단순-지수-평활-모델simple-exponentail-smoothing-model"><i class="fa fa-check"></i><b>6.6.1</b> 단순 지수 평활 모델(Simple Exponentail Smoothing Model)</a></li>
<li class="chapter" data-level="6.6.2" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#홀트holt-모델"><i class="fa fa-check"></i><b>6.6.2</b> 홀트(Holt) 모델</a></li>
<li class="chapter" data-level="6.6.3" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#홀트-윈터holt-winter-모델"><i class="fa fa-check"></i><b>6.6.3</b> 홀트-윈터(Holt-Winter) 모델</a></li>
<li class="chapter" data-level="6.6.4" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#ets-모델"><i class="fa fa-check"></i><b>6.6.4</b> ETS 모델</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="arima-모델.html"><a href="arima-모델.html"><i class="fa fa-check"></i><b>6.7</b> ARIMA 모델</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="arima-모델.html"><a href="arima-모델.html#자기회귀모델autoregressive-model"><i class="fa fa-check"></i><b>6.7.1</b> 자기회귀모델(AutoRegressive Model)</a></li>
<li class="chapter" data-level="6.7.2" data-path="arima-모델.html"><a href="arima-모델.html#이동평균-모델moving-average-model"><i class="fa fa-check"></i><b>6.7.2</b> 이동평균 모델(Moving Average Model)</a></li>
<li class="chapter" data-level="6.7.3" data-path="arima-모델.html"><a href="arima-모델.html#arima-모델-결정"><i class="fa fa-check"></i><b>6.7.3</b> ARIMA 모델 결정</a></li>
<li class="chapter" data-level="6.7.4" data-path="arima-모델.html"><a href="arima-모델.html#seasonal-arima-모델"><i class="fa fa-check"></i><b>6.7.4</b> Seasonal ARIMA 모델</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="tbats-모델.html"><a href="tbats-모델.html"><i class="fa fa-check"></i><b>6.8</b> TBATS 모델</a></li>
<li class="chapter" data-level="6.9" data-path="prophet-모델.html"><a href="prophet-모델.html"><i class="fa fa-check"></i><b>6.9</b> prophet 모델</a></li>
<li class="chapter" data-level="6.10" data-path="신경망neural-network-모델.html"><a href="신경망neural-network-모델.html"><i class="fa fa-check"></i><b>6.10</b> 신경망(Neural Network) 모델</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="시계열-forecasting-part-iii-시계열-분석-framework.html"><a href="시계열-forecasting-part-iii-시계열-분석-framework.html"><i class="fa fa-check"></i><b>7</b> 시계열 forecasting Part III - 시계열 분석 Framework</a>
<ul>
<li class="chapter" data-level="7.1" data-path="성능분석-지수.html"><a href="성능분석-지수.html"><i class="fa fa-check"></i><b>7.1</b> 성능분석 지수</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="성능분석-지수.html"><a href="성능분석-지수.html#maemeans-absolute-error"><i class="fa fa-check"></i><b>7.1.1</b> MAE(Means Absolute Error)</a></li>
<li class="chapter" data-level="7.1.2" data-path="성능분석-지수.html"><a href="성능분석-지수.html#rmseroot-means-squaread-error"><i class="fa fa-check"></i><b>7.1.2</b> RMSE(Root Means Squaread Error)</a></li>
<li class="chapter" data-level="7.1.3" data-path="성능분석-지수.html"><a href="성능분석-지수.html#mpe"><i class="fa fa-check"></i><b>7.1.3</b> MPE</a></li>
<li class="chapter" data-level="7.1.4" data-path="성능분석-지수.html"><a href="성능분석-지수.html#mape"><i class="fa fa-check"></i><b>7.1.4</b> MAPE</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="fable-framework.html"><a href="fable-framework.html"><i class="fa fa-check"></i><b>7.2</b> fable framework</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="fable-framework.html"><a href="fable-framework.html#미래-학생수-예측"><i class="fa fa-check"></i><b>7.2.1</b> 미래 학생수 예측</a></li>
<li class="chapter" data-level="7.2.2" data-path="fable-framework.html"><a href="fable-framework.html#미래-취업자수-예측"><i class="fa fa-check"></i><b>7.2.2</b> 미래 취업자수 예측</a></li>
<li class="chapter" data-level="7.2.3" data-path="fable-framework.html"><a href="fable-framework.html#미래-코로나-확진자수-예측"><i class="fa fa-check"></i><b>7.2.3</b> 미래 코로나 확진자수 예측</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="modeltime-framework.html"><a href="modeltime-framework.html"><i class="fa fa-check"></i><b>7.3</b> modeltime framework</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="modeltime-framework.html"><a href="modeltime-framework.html#미래-학생수-예측-1"><i class="fa fa-check"></i><b>7.3.1</b> 미래 학생수 예측</a></li>
<li class="chapter" data-level="7.3.2" data-path="modeltime-framework.html"><a href="modeltime-framework.html#미래-취업자수-예측-1"><i class="fa fa-check"></i><b>7.3.2</b> 미래 취업자수 예측</a></li>
<li class="chapter" data-level="7.3.3" data-path="modeltime-framework.html"><a href="modeltime-framework.html#미래-코로나-확진자수-예측-1"><i class="fa fa-check"></i><b>7.3.3</b> 미래 코로나 확진자수 예측</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a>
<ul>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7.4</b> R Markdown</a></li>
<li class="chapter" data-level="7.5" data-path="including-plots.html"><a href="including-plots.html"><i class="fa fa-check"></i><b>7.5</b> Including Plots</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Untitled</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="시계열-데이터-import" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> 시계열 데이터 Import</h2>
<p>시계열(Time Series) 데이터를 R에서 직접 생성할 수도 있으나 대부분의 경우는 다양한 파일 포맷(Excel, CSV, SPSS 등)으로 저장된 파일에서 읽어들이는 방법이 일반적이다. 일반적으로 데이터 파일에서 데이터를 읽어들여 시계열 데이터로 저장하는 방법은 다음과 같은 과정을 거친다.</p>
<div class="boxBorder">
<ol style="list-style-type: decimal">
<li><code>read_excel()</code>, <code>read.csv()</code>을 사용하여 엑셀 파일을 읽어 데이터를 데이터 프레임에 저장</li>
<li>읽어온 데이터가 적절한 데이터 타입으로 불러들여졌는지 확인하고 적절치 않은 데이터 타입으로 설정된 경우 적절히 변환</li>
<li>읽어온 데이터 중 시간을 기록한 데이터 컬럼을 <code>as.Date()</code>를 사용하여 date 클래스로 변환</li>
<li>시간 컬럼이 생성된 데이터 프레임을 <code>as.ts()</code>, <code>as.xts()</code>, <code>as.tsibble()</code> 등을 사용하여 사용하기 원하는 시계열 객체로 변환</li>
</ol>
</div>
<p>본 문서에서는 다양한 파일 포맷 중 Excel과 CSV파일에서 시계열 데이터를 읽어들여 활용하는 방법을 설명한다.</p>
<div id="엑셀-파일" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> 엑셀 파일</h3>
<p>데이터를 엑셀 파일에서 읽어들여 데이터 프레임에 저장 후 저장된 데이터 프레임을 시계열 데이터 타입으로 변환한다.</p>
<p>다음 예제에서 사용하는 자료는 연도별 학교급별 학생수 자료로 한국교육개발원 교육통계 서비스 홈페이지<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>에서 다운로드하였으며 연도별 시계열 데이터 샘플로 사용한다.</p>
<p><code>read_excel()</code>을 통해 excel 파일을 바로 읽어들일 수 있다. <code>read_excel()</code>을 사용하기 위해서는 먼저 <code>readxl</code> 패키지가 필요하다. 앞에서 소개한 엑셀 데이터를 데이터 프레임으로 읽어들이는 방법은 아래와 같다. 하나 주의해야하는 점은 col_type으로 적절한 데이터 타입을 미리 알려주지 않으면 엉뚱한 데이터가 들어온다는 것이다. 이 데이터 파일에서의 문제는 숫자에 천단위 구분기호(,)가 포함되어 있다보니 해당 컬럼이 numeric이라고 설정해주지 않으면 엉뚱한 데이터 타입(POSIXct)으로 불러들인다는 점이다.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb57-1"><a href="시계열-데이터-import.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb57-2"><a href="시계열-데이터-import.html#cb57-2" aria-hidden="true" tabindex="-1"></a>students.all <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;./students.xlsx&quot;</span>, <span class="at">skip =</span> <span class="dv">16</span>, <span class="at">na =</span> <span class="st">&#39;-&#39;</span>, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">&#39;text&#39;</span>, <span class="st">&#39;text&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;numeric&#39;</span>))</span>
<span id="cb57-3"><a href="시계열-데이터-import.html#cb57-3" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> students.all <span class="sc">%&gt;%</span> </span>
<span id="cb57-4"><a href="시계열-데이터-import.html#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(지역규모 <span class="sc">==</span> <span class="st">&#39;계&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>지역규모)</span>
<span id="cb57-5"><a href="시계열-데이터-import.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(students)  <span class="co"># 데이터 확인</span></span></code></pre></div>
<pre><code># A tibble: 6 x 17
  연도  학생수계 유치원 초등학교 중학교 고등학교계 일반계고 전문계고 일반고
  &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;
1 1999   8658358 534166  3935537 1.90e6    2251140  1399389   851751      0
2 2000   8535867 545263  4019991 1.86e6    2071468  1324482   746986      0
3 2001   8414423 545142  4089429 1.83e6    1911173  1259975   651198      0
4 2002   8361933 550256  4138366 1.84e6    1795509  1220146   575363      0
5 2003   8379775 546531  4175626 1.85e6    1766529  1224452   542077      0
6 2004   8371630 541713  4116195 1.93e6    1746560  1232010   514550      0
# ... with 8 more variables: 특목고 &lt;dbl&gt;, 특성화고 &lt;dbl&gt;, 자율고 &lt;dbl&gt;,
#   특수학교 &lt;dbl&gt;, 공민학교 &lt;dbl&gt;, 고등공민 &lt;dbl&gt;, 고등기술학교 &lt;dbl&gt;,
#   각종학교 &lt;dbl&gt;</code></pre>
<div class="comment">
<ul>
<li><p>코드 설명</p>
<ul>
<li><p><code>readxl</code> 패키지를 로딩</p></li>
<li><p>‘지역규모’ 컬럼이 ’계’인 데이터만 사용할 것이므로 <code>filter()</code>를 사용하여 원하는 데이터만 걸러내고 더이상 지역규모 컬럼이 필요없으니 제거</p></li>
<li><p>read_excel()을 이용하여 ‘students.xlsx’파일의 데이터를 읽음. 데이터 파일의 처음 16줄은 skip,(<code>skip = 16</code>)’-’로 표기된 데이터는 NA로 처리(<code>na = '-'</code>), 첫번째 엑셀 시트 데이터를 읽고(<code>sheet = 1</code>), 컬럼별 데이터 타입을 설정</p></li>
</ul></li>
</ul>
</div>
<p>불러들인 데이터는 데이터프레임으로 저장된다. 데이터 프레임도 시계열 객체를 담아 사용할 수 있는데 이를 위해서는 반드시 시간 인덱스로 사용할 컬럼이 필요하다. 불러들인 데이터에는 시간 인덱스로 사용할 수 있는 컬럼이 ‘연도’ 컬럼이다. 이 컬럼을 date 컬럼으로 바꾸는 과정은 다음과 같다.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb59-1"><a href="시계열-데이터-import.html#cb59-1" aria-hidden="true" tabindex="-1"></a>students<span class="sc">$</span>연도 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(students<span class="sc">$</span>연도, <span class="st">&#39;-01-01&#39;</span>))</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드 설명</p>
<ul>
<li><p>연도만 있는 데이터를 date형태로 바꾸려면 먼저 월, 일을 추가해야하기 때문에 <code>paste0()</code>를 사용하여 연도에 ‘-01-01’ 문자열을 붙임.</p></li>
<li><p>’연도-01-01’로 만들어지 문자열을 <code>as.Date()</code>로 date 클래스로 변환</p></li>
<li><p>변환된 데이터를 student.from.excel$연도에 저장</p></li>
</ul></li>
</ul>
</div>
<p>연도 컬럼을 date 클래스로 변환한 데이터 프레임을 사용하여 <code>ts</code>, <code>xts</code>, <code>tsibble</code> 시계열 데이터로 변환한다. 하나 주의해야할 사항은 각각의 클래스로 변환하는 함수명의 형태가 다르다는 점이다.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb60-1"><a href="시계열-데이터-import.html#cb60-1" aria-hidden="true" tabindex="-1"></a>students.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(students, <span class="at">frequency =</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="dv">1999</span>)</span>
<span id="cb60-2"><a href="시계열-데이터-import.html#cb60-2" aria-hidden="true" tabindex="-1"></a>students.xts <span class="ot">&lt;-</span> <span class="fu">as.xts</span>(students[,<span class="sc">-</span><span class="dv">1</span>], <span class="at">order.by =</span> students<span class="sc">$</span>연도)</span>
<span id="cb60-3"><a href="시계열-데이터-import.html#cb60-3" aria-hidden="true" tabindex="-1"></a>students.tsibble <span class="ot">&lt;-</span> students <span class="sc">%&gt;%</span> </span>
<span id="cb60-4"><a href="시계열-데이터-import.html#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(연도 <span class="ot">=</span> <span class="fu">yearmonth</span>(<span class="fu">paste0</span>(students<span class="sc">$</span>연도, <span class="st">&#39;-01-01&#39;</span>)))</span>
<span id="cb60-5"><a href="시계열-데이터-import.html#cb60-5" aria-hidden="true" tabindex="-1"></a>students.tsibble <span class="ot">&lt;-</span> <span class="fu">as_tsibble</span>(students.tsibble, <span class="at">index =</span> 연도)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드 설명</p>
<ul>
<li><p><code>ts()</code>로 student.from.excel 데이터 프레임의 데이터를 ts 객체로 변환하는데 연간 데이터이므로 주기를 1(<code>frequency = 1</code>)로 시작년을 1999년(<code>start = 1999</code>)으로 설정</p></li>
<li><p>as.xts()로 student.from.excel 데이터 프레임의 데이터를 xts 객체로 변환하는데 시간 인덱스를 student.from.excel$연도로 설정(<code>order.by = student.from.excel$연도</code>)</p></li>
<li><p><code>tsibble</code>로 변환할 데이터프레임을 미리 만들어두는데 시간인덱스로 사용할 컬럼을 <code>yearmonth</code> 클래스로 변환해둠</p></li>
<li><p><code>as_tsibble()</code>을 사용하여 students.tsibble 객체를 <code>tsibble</code> 객체로 변환</p></li>
</ul></li>
</ul>
</div>
</div>
<div id="csv-파일" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> CSV 파일</h3>
<p>CSV 파일은 데이터 필드의 구분자를 ’,’로 사용하는 형태의 텍스트 파일로 Comma Seperated Value의 준말이다. 데이터간의 호환을 위해 광범위하게 사용되는 파일 포맷이다.</p>
<p>R에서 CSV 파일을 읽을수 있는 함수는 여러가지가 있지만 여기서는 <code>read.csv()</code> 을 사용하는 방법을 설명한다.</p>
<p>CSV 파일로 데이터를 읽어들이는 예제는 월별 데이터는 통계청 KOSIS 홈페이지의 경제활동인구조사의 산업별 취업자수에서 다운받은 월간 취업자수와 교육서비스업 취업자수 데이터를 사용한다. 이 데이터는 통계청 KOSIS 홈페이지에서 다운로드<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a>받을 수 있는데 ’국내통계 &gt; 노동 &gt; 경제활동인구조사 &gt; 취업자 &gt; 산업별 취업자’에서 시점을 2013.1월부터 2020.12월까지, 산업구분을 전체 계와 교육서비스업으로 설정 후 행렬전환 기능을 사용하여 행에 기간, 열에 산업을 설정한 후 다운로드 받았는데 필자의 github에서 <a href="https://github.com/2stndard/concept-of-time-series/blob/master/%EC%82%B0%EC%97%85%EB%B3%84_%EC%B7%A8%EC%97%85%EC%9E%90_20210206234505.csv&#39;">다운</a>받을 수 있다.(csv 파일을 다운로드받는 방법은 다음의 사이트를 참조하길 바란다. <a href="https://technical-support.tistory.com/54" class="uri">&lt;https://technical-support.tistory.com/54&gt;</a>)</p>
<p>아래와 같이 read.csv 함수를 통해 csv파일을 읽어들일수 있다.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb61-1"><a href="시계열-데이터-import.html#cb61-1" aria-hidden="true" tabindex="-1"></a>employees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;./산업별_취업자_20210206234505.csv&#39;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">na =</span> <span class="st">&#39;-&#39;</span>, <span class="at">strip.white =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-2"><a href="시계열-데이터-import.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(employees) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;time&#39;</span>, <span class="st">&#39;total&#39;</span>, <span class="st">&#39;employees.edu&#39;</span>)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><p><code>read.csv()</code>를 사용하여 csv 파일의 데이터를 읽어오는데 csv 파일의 첫줄은 헤더줄로 설정(<code>header = TRUE</code>), ’-’로 기록된 데이터는 NA로 설정(<code>na = '-'</code>), 빈칸은 제거(<code>strip.white = TRUE</code>), 문자열은 factor로 설정(<code>stringsAsFactors = TRUE</code>)</p></li>
<li><p>컬럼명을 time, total, employees.edu 로 설정</p></li>
</ul></li>
</ul>
</div>
<p>읽어들인 데이터가 저장된 employees 데이터프레임에는 시계열 객체에서 사용할 수 있는 시간 인덱스 컬럼이 없다. 따라서 time 컬럼을 date 클래스로 바꿔준다.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb62-1"><a href="시계열-데이터-import.html#cb62-1" aria-hidden="true" tabindex="-1"></a>employees<span class="sc">$</span>time <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(employees<span class="sc">$</span>time, <span class="st">&#39;. 01&#39;</span>), <span class="at">format =</span> <span class="st">&#39;%Y. %m. %d&#39;</span>)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li>employees$time 컬럼에 저장된 데이터 형태는 ‘연도네자리. 월두자리’의 형태로 되어있기 때문에 우선 ’연도네자리. 월두자리. 일두자리’로 맞추기 위해 <code>paste0()</code>를 사용하여.’ 01’을 붙여줌</li>
<li>생성된 문자열을 date 클래스로 바꾸기 위해 <code>as.Date()</code>를 사용하는데 문자열 형태가 <code>date</code> 클래스의 기본형태가 아니기 때문에 R이 년월일을 제대로 읽을 수 있도록 <code>format</code> 매개변수를 사용하여 문자열 형태에서 날짜 정보를 추출하기 위한 정보(‘%Y. %m. %d’)를 전달</li>
</ul></li>
</ul>
</div>
<p>시간 인덱스로 사용될 date 클래스가 생성되었으므로 <code>ts</code>, <code>xts</code>, <code>tsibble</code> 객체로 변환한다.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb63-1"><a href="시계열-데이터-import.html#cb63-1" aria-hidden="true" tabindex="-1"></a>employees.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(employees, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2013</span>, <span class="dv">01</span>), <span class="at">frequency =</span> <span class="dv">12</span>)</span>
<span id="cb63-2"><a href="시계열-데이터-import.html#cb63-2" aria-hidden="true" tabindex="-1"></a>employees.xts <span class="ot">&lt;-</span> <span class="fu">xts</span>(employees[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">order.by =</span> employees[,<span class="dv">1</span>])</span>
<span id="cb63-3"><a href="시계열-데이터-import.html#cb63-3" aria-hidden="true" tabindex="-1"></a>employees.tsibble <span class="ot">&lt;-</span> <span class="fu">as_tsibble</span>(employees, <span class="at">index =</span> time)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드설명</p>
<ul>
<li><code>ts()</code>를 사용하여 employees를 <code>ts</code> 클래스로 변환하는데 시작월을 2013년 1월로 설정(<code>start = c(2013, 01)</code>), 월별 데이터이기 때문에 시계열 주기를 12(<code>frequency = 12</code>)로 설정</li>
<li><code>xts()</code>를 사용하여 employees를 <code>xts</code> 클래스로 변환하는데 사용하는 데이터는 employees의 두번쨰와 세번째 컬럼만을 선택(<code>employees[,2:3]</code>)하고 시간인덱스로 첫번째 컬럼(<code>order.by = employees[,1]</code>)을 사용한다.</li>
<li><code>as_tsibble()</code>을 사용하여 employees를 <code>tsibble</code> 클래스로 변환하는데 인덱스 컬럼을 time컬럼으로 설정</li>
</ul></li>
</ul>
</div>
</div>
<div id="추가-실습-데이터-생성" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> 추가 실습 데이터 생성</h3>
<p>앞서 생성한 두개의 데이터셋(students, employees)에 더하여 하나의 추가 데이터셋을 더 생성할 것이다. 일별 데이터로써 코로나 확진자수 데이터셋을 생성할 것이다. 코로나 데이터 셋은 통계청 KOSIS 홈페이지의 코로나 현황 홈페이지에서 다운로드 받았다. 앞서 생성한 연별 데이터(students), 월별 데이터(employees)에 추가적으로 일별 데이터를 생성한다.</p>
<div id="일별-데이터---코로나-확진자-수" class="section level4" number="2.3.3.1">
<h4><span class="header-section-number">2.3.3.1</span> 일별 데이터 - 코로나 확진자 수</h4>
<p>일별 코로나 확진자수는 통계청 KOSIS 홈페이지에서 다운로드<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>받았고 필자의 github에서 다운로드 받을수 있다. 이 데이터 셋을 사용하기 위해서는 <code>spread()</code>를 사용하여 긴(long) 형태의 데이터 프레임을 넓은(wide) 형태의 데이터프레임이 필요하다.</p>
<p>먼저 <code>read.csv()</code>를 이용하여 파일의 데이터를 읽어들인다.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb64-1"><a href="시계열-데이터-import.html#cb64-1" aria-hidden="true" tabindex="-1"></a>covid19 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;./covid19.csv&#39;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">na =</span> <span class="st">&#39;-&#39;</span>, <span class="at">strip.white =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb64-2"><a href="시계열-데이터-import.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(covid19) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;category&#39;</span>, <span class="st">&#39;status&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;value&#39;</span>)</span>
<span id="cb64-3"><a href="시계열-데이터-import.html#cb64-3" aria-hidden="true" tabindex="-1"></a>covid19 <span class="ot">&lt;-</span> covid19[, <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>)]</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드 설명</p>
<ul>
<li><code>read.csv()</code>를 사용하여 csv 파일의 데이터를 읽어오는데 csv 파일의 첫줄은 헤더줄로 설정(<code>header = TRUE</code>), ’-’로 기록된 데이터는 NA로 설정(<code>na = '-'</code>), 빈칸은 제거(<code>strip.white = TRUE</code>), 문자열은 factor로 설정(<code>stringsAsFactors = TRUE</code>)</li>
<li>컬럼명을 ‘category,’ ‘status,’ ‘date,’ ’value’로 설정</li>
<li>데이터프레임을 보기쉽게 하기 위해 컬럼의 순서를 바꿈</li>
</ul></li>
</ul>
</div>
<p>날짜 컬럼을 만들기 위해 date 컬럼의 데이터를 date 클래스로 바꾼다.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb65-1"><a href="시계열-데이터-import.html#cb65-1" aria-hidden="true" tabindex="-1"></a>covid19<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(covid19<span class="sc">$</span>date, <span class="st">&quot;%Y. %m. %d&quot;</span>)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드 설명</p>
<ul>
<li>읽어들인 데이터의 date 컬럼의 데이터 클래스를 바꾸기 위해 <code>as.Date()</code>를 사용하는데 문자열 형태가 <code>date</code> 클래스의 기본형태가 아니기 때문에 R이 년월일을 제대로 읽을 수 있도록 <code>format</code> 매개변수를 사용하여 문자열 형태에서 날짜 정보를 추출하기 위한 정보(‘%Y. %m. %d’)를 전달</li>
</ul></li>
</ul>
</div>
<p>읽어들인 데이터 중에 연령대별 데이터만 사용하기 위해 category 컬럼에서 ’세’를 포함한 행만 선택하는데 지역구분중에 ’세종’이 있기 때문에 ’세종’만 추가적으로 제외한다.그 다음 데이터에 NA로 기록된 결측치를 처리한다. 결측치를 처리하는 방법으로 여러가지가 있지만 여기서는 일단 0을 넣어주는 방법으로 결측치를 처리하였다.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb66-1"><a href="시계열-데이터-import.html#cb66-1" aria-hidden="true" tabindex="-1"></a>covid19 <span class="ot">&lt;-</span> covid19 <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="시계열-데이터-import.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&#39;세&#39;</span>, category)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-3"><a href="시계열-데이터-import.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(category <span class="sc">!=</span> <span class="st">&#39;세종&#39;</span>)</span>
<span id="cb66-4"><a href="시계열-데이터-import.html#cb66-4" aria-hidden="true" tabindex="-1"></a>covid19<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(covid19<span class="sc">$</span>value), <span class="dv">0</span>, covid19<span class="sc">$</span>value)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드 설명</p>
<ul>
<li><p><code>grepl()</code>은 문자열에서 특정 문자가 존재하면 TRUE를 반환하는 함수임. category에서 ’세’문자가 존재하는 행을 골라내고, 다시 그 결과중에 ’세종’이 아닌 행만 골라내서 covid19에 저장함</p>
<ul>
<li><code>is.na()</code>로 covid1$value이 NA인지 검사하고 만약(<code>ifelse</code>) NA라면 0을 넣고 아니면 원래값(covid19$value)을 넣어줌. :</li>
</ul></li>
</ul></li>
</ul>
</div>
<p>이제 사용해야할 데이터의 처리가 완료되었다. 시계열 데이터 처리에는 긴(long) 형태의 데이터보다는 넓은(wide) 형태의 데이터가 좋기 때문에 <code>spread()</code>를 사용하여 긴 형태를 좁은 형태로 바꾸었다.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb67-1"><a href="시계열-데이터-import.html#cb67-1" aria-hidden="true" tabindex="-1"></a>covid19 <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">spread</span>(covid19, category, value)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드 설명</p>
<ul>
<li>covid19 데이터프레임의 category의 변수들을 컬럼화하고 해당 컬럼에 넣을 데이터는 value로 채워넣음</li>
</ul></li>
</ul>
</div>
<p>데이터 정리가 다 끝났으므로 <code>ts</code>, <code>xts</code>, <code>tsibble</code> 객체로 변환한다.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r watch-out"><code class="sourceCode r"><span id="cb68-1"><a href="시계열-데이터-import.html#cb68-1" aria-hidden="true" tabindex="-1"></a>covid19.ts <span class="ot">&lt;-</span> <span class="fu">ts</span>(covid19[, <span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">frequency =</span> <span class="dv">365</span>)</span>
<span id="cb68-2"><a href="시계열-데이터-import.html#cb68-2" aria-hidden="true" tabindex="-1"></a>covid19.xts <span class="ot">&lt;-</span> <span class="fu">as.xts</span>(covid19[, <span class="dv">3</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">order.by =</span> covid19<span class="sc">$</span>date)</span>
<span id="cb68-3"><a href="시계열-데이터-import.html#cb68-3" aria-hidden="true" tabindex="-1"></a>covid19.tsibble <span class="ot">&lt;-</span> <span class="fu">as_tsibble</span>(covid19, <span class="at">index =</span> date)</span></code></pre></div>
<div class="comment">
<ul>
<li><p>코드 설명</p>
<ul>
<li><code>ts()</code>를 사용하여 covid19를 <code>ts</code>로 변환하는데 covid19의 두번째부터 10번째컬럼(<code>covid19[, 2:10]</code>)까지를 사용하고 일별 데이터이기 때문에 시계열 주기를 365로 설정(<code>frequency = 365</code>)</li>
<li><code>xts()</code>를 사용하여 covid19를 <code>xts</code>로 변환하는데 covid19의 세번째부터 10번째컬럼(<code>covid19[, 3:10]</code>)까지를 사용하고 시간인덱스를 covid19$date로 설정(<code>order.by = covid19\$date</code>)</li>
<li><code>as_tsibble()</code>을 사용하여 covid19를 <code>tsibble</code>로 변환하는데 시간인덱스를 date로 설정(<code>index = date</code>)</li>
</ul></li>
</ul>
</div>

</div>
</div>
</div>
<!-- </div> -->
<div class="footnotes">
<hr />
<ol start="9">
<li id="fn9"><p><a href="https://kess.kedi.re.kr/userfile/6711778" class="uri">https://kess.kedi.re.kr/userfile/6711778</a><a href="시계열-데이터-import.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p><a href="https://kosis.kr/statisticsList/statisticsListIndex.do?parentId=D.1&amp;menuId=M_01_01&amp;vwcd=MT_ZTITLE&amp;parmTabId=M_01_01&amp;entrType=btn#content-group" class="uri">https://kosis.kr/statisticsList/statisticsListIndex.do?parentId=D.1&amp;menuId=M_01_01&amp;vwcd=MT_ZTITLE&amp;parmTabId=M_01_01&amp;entrType=btn#content-group</a><a href="시계열-데이터-import.html#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p><a href="https://kosis.kr/covid/covid_index.do" class="uri">https://kosis.kr/covid/covid_index.do</a><a href="시계열-데이터-import.html#fnref11" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="시계열-데이터-객체object.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="시계열-visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["t.pdf", "t.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
