<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7.3 modeltime | Untitled</title>
  <meta name="description" content="7.3 modeltime | Untitled" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="7.3 modeltime | Untitled" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7.3 modeltime | Untitled" />
  
  
  

<meta name="author" content="이기준" />


<meta name="date" content="2021-02-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="fable.html"/>
<link rel="next" href="references.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">교육, 고용, 코로나 데이터를 활용한 시계열 데이터 분석 in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 시계열 데이터</a>
<ul>
<li class="chapter" data-level="1.1" data-path="정의.html"><a href="정의.html"><i class="fa fa-check"></i><b>1.1</b> 정의</a></li>
<li class="chapter" data-level="1.2" data-path="특성.html"><a href="특성.html"><i class="fa fa-check"></i><b>1.2</b> 특성</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="특성.html"><a href="특성.html#고정된-시간-독립변수"><i class="fa fa-check"></i><b>1.2.1</b> 고정된 시간 독립변수</a></li>
<li class="chapter" data-level="1.2.2" data-path="특성.html"><a href="특성.html#자기-상관관계"><i class="fa fa-check"></i><b>1.2.2</b> 자기 상관관계</a></li>
<li class="chapter" data-level="1.2.3" data-path="특성.html"><a href="특성.html#추세-경향성trend"><i class="fa fa-check"></i><b>1.2.3</b> 추세 경향성(Trend)</a></li>
<li class="chapter" data-level="1.2.4" data-path="특성.html"><a href="특성.html#계절성seasonality-순환성cyclic"><i class="fa fa-check"></i><b>1.2.4</b> 계절성(Seasonality), 순환성(Cyclic)</a></li>
<li class="chapter" data-level="1.2.5" data-path="특성.html"><a href="특성.html#불확실성uncertainty"><i class="fa fa-check"></i><b>1.2.5</b> 불확실성(Uncertainty)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="시계열-데이터-타입-및-import.html"><a href="시계열-데이터-타입-및-import.html"><i class="fa fa-check"></i><b>2</b> 시계열 데이터 타입 및 Import</a>
<ul>
<li class="chapter" data-level="2.1" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html"><i class="fa fa-check"></i><b>2.1</b> 날짜/시간 데이터 클래스</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#date-class"><i class="fa fa-check"></i><b>2.1.1</b> Date class</a></li>
<li class="chapter" data-level="2.1.2" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#posixct-posixlt-data-class"><i class="fa fa-check"></i><b>2.1.2</b> POSIXct, POSIXlt data class</a></li>
<li class="chapter" data-level="2.1.3" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#yearmon-yearqtr-class"><i class="fa fa-check"></i><b>2.1.3</b> yearmon, yearqtr class</a></li>
<li class="chapter" data-level="2.1.4" data-path="날짜시간-데이터-클래스.html"><a href="날짜시간-데이터-클래스.html#날짜-시간-포맷"><i class="fa fa-check"></i><b>2.1.4</b> 날짜, 시간 포맷</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="시계열-패키지-및-데이터-객체object.html"><a href="시계열-패키지-및-데이터-객체object.html"><i class="fa fa-check"></i><b>2.2</b> 시계열 패키지 및 데이터 객체(Object)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="시계열-패키지-및-데이터-객체object.html"><a href="시계열-패키지-및-데이터-객체object.html#ts"><i class="fa fa-check"></i><b>2.2.1</b> ts</a></li>
<li class="chapter" data-level="2.2.2" data-path="시계열-패키지-및-데이터-객체object.html"><a href="시계열-패키지-및-데이터-객체object.html#zoo"><i class="fa fa-check"></i><b>2.2.2</b> zoo</a></li>
<li class="chapter" data-level="2.2.3" data-path="시계열-패키지-및-데이터-객체object.html"><a href="시계열-패키지-및-데이터-객체object.html#xts"><i class="fa fa-check"></i><b>2.2.3</b> xts</a></li>
<li class="chapter" data-level="2.2.4" data-path="시계열-패키지-및-데이터-객체object.html"><a href="시계열-패키지-및-데이터-객체object.html#tsibble"><i class="fa fa-check"></i><b>2.2.4</b> tsibble</a></li>
<li class="chapter" data-level="2.2.5" data-path="시계열-패키지-및-데이터-객체object.html"><a href="시계열-패키지-및-데이터-객체object.html#modeltime"><i class="fa fa-check"></i><b>2.2.5</b> modeltime</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="시계열-데이터-import의-방법.html"><a href="시계열-데이터-import의-방법.html"><i class="fa fa-check"></i><b>2.3</b> 시계열 데이터 Import의 방법</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="시계열-데이터-import의-방법.html"><a href="시계열-데이터-import의-방법.html#파일에서-시계열-데이터로-읽어들이는-방법"><i class="fa fa-check"></i><b>2.3.1</b> 파일에서 시계열 데이터로 읽어들이는 방법</a></li>
<li class="chapter" data-level="2.3.2" data-path="시계열-데이터-import의-방법.html"><a href="시계열-데이터-import의-방법.html#직접-시계열-데이터-타입으로-읽어들이는-방법"><i class="fa fa-check"></i><b>2.3.2</b> 직접 시계열 데이터 타입으로 읽어들이는 방법</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="실습-데이터-생성.html"><a href="실습-데이터-생성.html"><i class="fa fa-check"></i><b>2.4</b> 실습 데이터 생성</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="실습-데이터-생성.html"><a href="실습-데이터-생성.html#월별-데이터---경제활동-인구조사-산업별-취업자수"><i class="fa fa-check"></i><b>2.4.1</b> 월별 데이터 - 경제활동 인구조사 산업별 취업자수</a></li>
<li class="chapter" data-level="2.4.2" data-path="실습-데이터-생성.html"><a href="실습-데이터-생성.html#일별-데이터---코로나-확진자-수"><i class="fa fa-check"></i><b>2.4.2</b> 일별 데이터 - 코로나 확진자 수</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="시계열-visualization.html"><a href="시계열-visualization.html"><i class="fa fa-check"></i><b>3</b> 시계열 Visualization</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-frame-ggplot2-패키지.html"><a href="data-frame-ggplot2-패키지.html"><i class="fa fa-check"></i><b>3.1</b> data.frame : ggplot2 패키지</a></li>
<li class="chapter" data-level="3.2" data-path="xts-xts-패키지.html"><a href="xts-xts-패키지.html"><i class="fa fa-check"></i><b>3.2</b> xts : xts 패키지</a></li>
<li class="chapter" data-level="3.3" data-path="ts-forecast-패키지.html"><a href="ts-forecast-패키지.html"><i class="fa fa-check"></i><b>3.3</b> ts : forecast 패키지</a></li>
<li class="chapter" data-level="3.4" data-path="tsibble-feasts-패키지.html"><a href="tsibble-feasts-패키지.html"><i class="fa fa-check"></i><b>3.4</b> tsibble : feasts 패키지</a></li>
<li class="chapter" data-level="3.5" data-path="data-frame-timetk-패키지.html"><a href="data-frame-timetk-패키지.html"><i class="fa fa-check"></i><b>3.5</b> data.frame : timetk 패키지</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="시계열-데이터-handling.html"><a href="시계열-데이터-handling.html"><i class="fa fa-check"></i><b>4</b> 시계열 데이터 Handling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="시계열-데이터-정보-다루기.html"><a href="시계열-데이터-정보-다루기.html"><i class="fa fa-check"></i><b>4.1</b> 시계열 데이터 정보 다루기</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="시계열-데이터-정보-다루기.html"><a href="시계열-데이터-정보-다루기.html#시계열-정보-추출"><i class="fa fa-check"></i><b>4.1.1</b> 시계열 정보 추출</a></li>
<li class="chapter" data-level="4.1.2" data-path="시계열-데이터-정보-다루기.html"><a href="시계열-데이터-정보-다루기.html#시계열-데이터-연산"><i class="fa fa-check"></i><b>4.1.2</b> 시계열 데이터 연산</a></li>
<li class="chapter" data-level="4.1.3" data-path="시계열-데이터-정보-다루기.html"><a href="시계열-데이터-정보-다루기.html#시계열-데이터-반올림"><i class="fa fa-check"></i><b>4.1.3</b> 시계열 데이터 반올림</a></li>
<li class="chapter" data-level="4.1.4" data-path="시계열-데이터-정보-다루기.html"><a href="시계열-데이터-정보-다루기.html#시계열-데이터-grouping"><i class="fa fa-check"></i><b>4.1.4</b> 시계열 데이터 Grouping</a></li>
<li class="chapter" data-level="4.1.5" data-path="시계열-데이터-정보-다루기.html"><a href="시계열-데이터-정보-다루기.html#시계열-데이터-ohlc"><i class="fa fa-check"></i><b>4.1.5</b> 시계열 데이터 OHLC</a></li>
<li class="chapter" data-level="4.1.6" data-path="시계열-데이터-정보-다루기.html"><a href="시계열-데이터-정보-다루기.html#시계열-데이터-rolling"><i class="fa fa-check"></i><b>4.1.6</b> 시계열 데이터 Rolling</a></li>
<li class="chapter" data-level="4.1.7" data-path="시계열-데이터-정보-다루기.html"><a href="시계열-데이터-정보-다루기.html#시계열-데이터-filtering"><i class="fa fa-check"></i><b>4.1.7</b> 시계열 데이터 Filtering</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="시계열-데이터-응용-사례.html"><a href="시계열-데이터-응용-사례.html"><i class="fa fa-check"></i><b>4.2</b> 시계열 데이터 응용 사례</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="시계열-데이터-응용-사례.html"><a href="시계열-데이터-응용-사례.html#월별-분기별-연별-합계"><i class="fa fa-check"></i><b>4.2.1</b> 월별, 분기별, 연별 합계</a></li>
<li class="chapter" data-level="4.2.2" data-path="시계열-데이터-응용-사례.html"><a href="시계열-데이터-응용-사례.html#월별-분기별-연별-증감량"><i class="fa fa-check"></i><b>4.2.2</b> 월별, 분기별, 연별 증감량</a></li>
<li class="chapter" data-level="4.2.3" data-path="시계열-데이터-응용-사례.html"><a href="시계열-데이터-응용-사례.html#월-비중-백분율-연-비중-백분율"><i class="fa fa-check"></i><b>4.2.3</b> 월 비중 백분율, 연 비중 백분율</a></li>
<li class="chapter" data-level="4.2.4" data-path="시계열-데이터-응용-사례.html"><a href="시계열-데이터-응용-사례.html#월별-분기별-연별-누적합계"><i class="fa fa-check"></i><b>4.2.4</b> 월별, 분기별, 연별 누적합계</a></li>
<li class="chapter" data-level="4.2.5" data-path="시계열-데이터-응용-사례.html"><a href="시계열-데이터-응용-사례.html#동월별-동분기별-동년별-plot"><i class="fa fa-check"></i><b>4.2.5</b> 동월별, 동분기별, 동년별 Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="시계열-forecasting-part-i-기초컨셉.html"><a href="시계열-forecasting-part-i-기초컨셉.html"><i class="fa fa-check"></i><b>5</b> 시계열 forecasting Part I - 기초컨셉</a>
<ul>
<li class="chapter" data-level="5.1" data-path="정상성stationary-비정상성non-stationary.html"><a href="정상성stationary-비정상성non-stationary.html"><i class="fa fa-check"></i><b>5.1</b> 정상성(Stationary), 비정상성(Non-Stationary)</a></li>
<li class="chapter" data-level="5.2" data-path="지연lag와-차분difference.html"><a href="지연lag와-차분difference.html"><i class="fa fa-check"></i><b>5.2</b> 지연(Lag)와 차분(Difference)</a></li>
<li class="chapter" data-level="5.3" data-path="acf와-pacf.html"><a href="acf와-pacf.html"><i class="fa fa-check"></i><b>5.3</b> ACF와 PACF</a></li>
<li class="chapter" data-level="5.4" data-path="적합값fitted-value-와-잔차residuals.html"><a href="적합값fitted-value-와-잔차residuals.html"><i class="fa fa-check"></i><b>5.4</b> 적합값(fitted value) 와 잔차(residuals)</a></li>
<li class="chapter" data-level="5.5" data-path="백색-잡음white-noise.html"><a href="백색-잡음white-noise.html"><i class="fa fa-check"></i><b>5.5</b> 백색 잡음(White Noise)</a></li>
<li class="chapter" data-level="5.6" data-path="시계열-분해decomposition.html"><a href="시계열-분해decomposition.html"><i class="fa fa-check"></i><b>5.6</b> 시계열 분해(Decomposition)</a></li>
<li class="chapter" data-level="5.7" data-path="정상성-테스트.html"><a href="정상성-테스트.html"><i class="fa fa-check"></i><b>5.7</b> 정상성 테스트</a></li>
<li class="chapter" data-level="5.8" data-path="계절성-ploting과-테스트.html"><a href="계절성-ploting과-테스트.html"><i class="fa fa-check"></i><b>5.8</b> 계절성 ploting과 테스트</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="시계열-forecasting-part-ii-시계열-예측-모델.html"><a href="시계열-forecasting-part-ii-시계열-예측-모델.html"><i class="fa fa-check"></i><b>6</b> 시계열 forecasting Part II - 시계열 예측 모델</a>
<ul>
<li class="chapter" data-level="6.1" data-path="simple-모델.html"><a href="simple-모델.html"><i class="fa fa-check"></i><b>6.1</b> Simple 모델</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="simple-모델.html"><a href="simple-모델.html#평균-모델forecastmeanf"><i class="fa fa-check"></i><b>6.1.1</b> 평균 모델(forecast::meanf)</a></li>
<li class="chapter" data-level="6.1.2" data-path="simple-모델.html"><a href="simple-모델.html#단순naive-모델"><i class="fa fa-check"></i><b>6.1.2</b> 단순(Naive) 모델</a></li>
<li class="chapter" data-level="6.1.3" data-path="simple-모델.html"><a href="simple-모델.html#계절성-단순seasonal-naive-모델"><i class="fa fa-check"></i><b>6.1.3</b> 계절성 단순(Seasonal Naive) 모델</a></li>
<li class="chapter" data-level="6.1.4" data-path="simple-모델.html"><a href="simple-모델.html#random-work-모델"><i class="fa fa-check"></i><b>6.1.4</b> Random Work 모델</a></li>
<li class="chapter" data-level="6.1.5" data-path="simple-모델.html"><a href="simple-모델.html#simple-모델-비교"><i class="fa fa-check"></i><b>6.1.5</b> Simple 모델 비교</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="regression-모델.html"><a href="regression-모델.html"><i class="fa fa-check"></i><b>6.2</b> Regression 모델</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="regression-모델.html"><a href="regression-모델.html#tslm-함수forecast-패키지"><i class="fa fa-check"></i><b>6.2.1</b> tslm 함수(forecast 패키지)</a></li>
<li class="chapter" data-level="6.2.2" data-path="regression-모델.html"><a href="regression-모델.html#plot_time_series_regression-함수timetk-패키지"><i class="fa fa-check"></i><b>6.2.2</b> plot_time_series_regression 함수(timetk 패키지)</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html"><i class="fa fa-check"></i><b>6.3</b> 지수 평활(Exponential Smoothing) 모델</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#단순-지수-평활-모델simple-exponentail-smoothing-model"><i class="fa fa-check"></i><b>6.3.1</b> 단순 지수 평활 모델(Simple Exponentail Smoothing Model)</a></li>
<li class="chapter" data-level="6.3.2" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#홀트holt-모델"><i class="fa fa-check"></i><b>6.3.2</b> 홀트(Holt) 모델</a></li>
<li class="chapter" data-level="6.3.3" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#홀트-윈터holt-winter-모델"><i class="fa fa-check"></i><b>6.3.3</b> 홀트-윈터(Holt-Winter) 모델</a></li>
<li class="chapter" data-level="6.3.4" data-path="지수-평활exponential-smoothing-모델.html"><a href="지수-평활exponential-smoothing-모델.html#ets-모델"><i class="fa fa-check"></i><b>6.3.4</b> ETS 모델</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="arima-모델.html"><a href="arima-모델.html"><i class="fa fa-check"></i><b>6.4</b> ARIMA 모델</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="arima-모델.html"><a href="arima-모델.html#자기회귀모델autoregressive-model"><i class="fa fa-check"></i><b>6.4.1</b> 자기회귀모델(AutoRegressive Model)</a></li>
<li class="chapter" data-level="6.4.2" data-path="arima-모델.html"><a href="arima-모델.html#이동평균-모델moving-average-model"><i class="fa fa-check"></i><b>6.4.2</b> 이동평균 모델(Moving Average Model)</a></li>
<li class="chapter" data-level="6.4.3" data-path="arima-모델.html"><a href="arima-모델.html#arima-모델-결정"><i class="fa fa-check"></i><b>6.4.3</b> ARIMA 모델 결정</a></li>
<li class="chapter" data-level="6.4.4" data-path="arima-모델.html"><a href="arima-모델.html#seasonal-arima-모델"><i class="fa fa-check"></i><b>6.4.4</b> Seasonal ARIMA 모델</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="tbats-모델.html"><a href="tbats-모델.html"><i class="fa fa-check"></i><b>6.5</b> TBATs 모델</a></li>
<li class="chapter" data-level="6.6" data-path="prophet-모델.html"><a href="prophet-모델.html"><i class="fa fa-check"></i><b>6.6</b> prophet 모델</a></li>
<li class="chapter" data-level="6.7" data-path="neural-network-모델.html"><a href="neural-network-모델.html"><i class="fa fa-check"></i><b>6.7</b> Neural Network 모델</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="시계열-forecasting-part-iii-시계열-분석-framework.html"><a href="시계열-forecasting-part-iii-시계열-분석-framework.html"><i class="fa fa-check"></i><b>7</b> 시계열 forecasting Part III - 시계열 분석 Framework</a>
<ul>
<li class="chapter" data-level="7.1" data-path="성능분석-지수.html"><a href="성능분석-지수.html"><i class="fa fa-check"></i><b>7.1</b> 성능분석 지수</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="성능분석-지수.html"><a href="성능분석-지수.html#rmseroot-means-squaread-error"><i class="fa fa-check"></i><b>7.1.1</b> RMSE(Root Means Squaread Error)</a></li>
<li class="chapter" data-level="7.1.2" data-path="성능분석-지수.html"><a href="성능분석-지수.html#mae"><i class="fa fa-check"></i><b>7.1.2</b> MAE</a></li>
<li class="chapter" data-level="7.1.3" data-path="성능분석-지수.html"><a href="성능분석-지수.html#mpe"><i class="fa fa-check"></i><b>7.1.3</b> MPE</a></li>
<li class="chapter" data-level="7.1.4" data-path="성능분석-지수.html"><a href="성능분석-지수.html#mape"><i class="fa fa-check"></i><b>7.1.4</b> MAPE</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="fable.html"><a href="fable.html"><i class="fa fa-check"></i><b>7.2</b> fable</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="fable.html"><a href="fable.html#미래-학생수-예측"><i class="fa fa-check"></i><b>7.2.1</b> 미래 학생수 예측</a></li>
<li class="chapter" data-level="7.2.2" data-path="fable.html"><a href="fable.html#미래-취업자수-예측"><i class="fa fa-check"></i><b>7.2.2</b> 미래 취업자수 예측</a></li>
<li class="chapter" data-level="7.2.3" data-path="fable.html"><a href="fable.html#미래-코로나-확진자수-예측"><i class="fa fa-check"></i><b>7.2.3</b> 미래 코로나 확진자수 예측</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="modeltime-1.html"><a href="modeltime-1.html"><i class="fa fa-check"></i><b>7.3</b> modeltime</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="modeltime-1.html"><a href="modeltime-1.html#linear_reg-함수tidymodels-parsnip-modeltime-패키지"><i class="fa fa-check"></i><b>7.3.1</b> linear_reg 함수(tidymodels, parsnip, modeltime 패키지)</a></li>
<li class="chapter" data-level="7.3.2" data-path="modeltime-1.html"><a href="modeltime-1.html#미래-학생수-예측-1"><i class="fa fa-check"></i><b>7.3.2</b> 미래 학생수 예측</a></li>
<li class="chapter" data-level="7.3.3" data-path="modeltime-1.html"><a href="modeltime-1.html#미래-취업자수-예측-1"><i class="fa fa-check"></i><b>7.3.3</b> 미래 취업자수 예측</a></li>
<li class="chapter" data-level="7.3.4" data-path="modeltime-1.html"><a href="modeltime-1.html#미래-코로나-확진자수-예측-1"><i class="fa fa-check"></i><b>7.3.4</b> 미래 코로나 확진자수 예측</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a>
<ul>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7.4</b> R Markdown</a></li>
<li class="chapter" data-level="7.5" data-path="including-plots.html"><a href="including-plots.html"><i class="fa fa-check"></i><b>7.5</b> Including Plots</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Untitled</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="modeltime-1" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> modeltime</h2>
<p>Just follow the <code>modeltime</code> workflow, which is detailed in 6 convenient steps:</p>
<ol style="list-style-type: decimal">
<li><p>Collect data and split into training and test sets</p></li>
<li><p>Create &amp; Fit Multiple Models</p></li>
<li><p>Add fitted models to a <strong>Model Table</strong></p></li>
<li><p><strong>Calibrate</strong> the models to a testing set.</p></li>
<li><p>Perform Testing Set <em>Forecast</em> &amp; <em>Accuracy</em> Evaluation</p></li>
<li><p><strong>Refit</strong> the models to Full Dataset &amp; <em>Forecast</em> Forward</p></li>
</ol>
<div id="linear_reg-함수tidymodels-parsnip-modeltime-패키지" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> linear_reg 함수(tidymodels, parsnip, modeltime 패키지)</h3>
<p>본 절에서 parship 패키지와 modeltime 패키지를 사용하여 선형 회귀 모델을 생성하는 방법을 소개한다. parsnip 패키지는 머신러닝 패키지인 ‘caret’ 패키지를 개발한 Max Kuhn이 개발한 패키지이다. 이 패키지는 R, Spark, Stan 등의 엔진에서 사용하는 함수들이 함수마다 다른 인수를 사용하기 때문에 사용자들이 사용하기 힘들다는 점에 착안하여 인수 이름을 표준화하여 사용할 수 있는 인터페이스를 제공한다.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>parsnip은 R의 여러 패키지에서 유사한 기능으로 제공하는 함수들을 사용하는 표준화된 접근 방법을 제공하는데 이 패키지를 사용하여 전체적인 머신러닝 모델을 생성하기 위해서는 몇가지 더 필요한 패키지를 사용해야한다. tidymodels(tidy 타입의 모델생성), skim(데이터 탐색), rsample(훈련용, 테스트용 데이터 분리), reciepes(데이터 전처리), yardstick(성능 분석)등의 패키지를 사용하는 방법이 많이 사용되고 있다. 그러나 시계열 모델에서는 tidymodels, modeltime 패키지를 사용할 수 있다.</p>
<p>modeltime은 tidymodels 환경에서 시계열 데이터의 예측 프레임워크로 forecast 패키지에서 제공하는 대부분의 예측 방법을 제공하며 facebook에서 개발된 prophet 알고리즘까지 제공한다.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<p>tidymodels, parsnip, modeltime 패키지를 사용하여 시계열 데이터 선형 회귀 모델은 다음의 순서와 같이 만들 수 있다.</p>
<ol style="list-style-type: decimal">
<li><p>트레이닝 셋과 테스트 셋을 나눈다. (권장되지만 필수는 아니다.)</p></li>
<li><p>linear_reg(), set_engine(), fit() 함수를 사용하여 선형 회귀모델을 생성한다. 먼저 linear_reg()함수를 통해 선형 회귀분석을 선언한다. 이 후 set_engine() 함수를 사용하여 선형 회귀 모델을 선정하는 계산방법을 지정한다. 아래의 예제에서는 ‘lm’ 방법을 지정함으로써 최소제곱법을 사용하여 선형 회귀 모델을 선정하게 된다. 마지막으로 모델링을 위한 포뮬라와 데이터를 fit() 함수를 통해 전달함으로서 최종 모델이 생성된다.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p></li>
<li><p>생성된 모델을 modeltime_table() 함수에 적용하여 모델 테이블을 생성한다. 향후 설명하겠지만 모델 테이블에 여러 모델을 전달할 수 있는데 모델 테이블에 전달된 각각의 모델은 추후 성능비교 테이블이 제공되기 때문에 여러 모델의 성능을 비교하는데 편리하게 사용될 수 있다 .</p></li>
<li><p>modeltime_calibrate() 함수를 사용하여 테스트 데이터를 사용하여 모델을 교정한다. 앞서 테스트 셋을 나누지 않은 경우는 전체 데이터 셋을 사용할 수 있다.</p></li>
<li><p>modeltime_forecast() 함수를 사용하여 미래 데이터를 생성한다. 이후 plot_modeltime_forecast() 함수를 사용하여 plotting을 생성한다.</p></li>
</ol>
</div>
<div id="미래-학생수-예측-1" class="section level3" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> 미래 학생수 예측</h3>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="modeltime-1.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span></code></pre></div>
<pre><code>## Warning: package &#39;modeltime&#39; was built under R version 4.0.3</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="modeltime-1.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parsnip)</span></code></pre></div>
<pre><code>## Warning: package &#39;parsnip&#39; was built under R version 4.0.3</code></pre>
<pre><code>## 
## Attaching package: &#39;parsnip&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:fabletools&#39;:
## 
##     null_model</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="modeltime-1.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span></code></pre></div>
<pre><code>## Warning: package &#39;tidymodels&#39; was built under R version 4.0.3</code></pre>
<pre><code>## -- Attaching packages -------------------------------------- tidymodels 0.1.2 --</code></pre>
<pre><code>## √ broom     0.7.4      √ rsample   0.0.8 
## √ dials     0.0.9      √ tune      0.1.2 
## √ infer     0.5.4      √ workflows 0.2.1 
## √ modeldata 0.1.0      √ yardstick 0.0.7 
## √ recipes   0.1.15</code></pre>
<pre><code>## Warning: package &#39;broom&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;dials&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;infer&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;modeldata&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;recipes&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;rsample&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;tune&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;workflows&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;yardstick&#39; was built under R version 4.0.3</code></pre>
<pre><code>## -- Conflicts ----------------------------------------- tidymodels_conflicts() --
## x yardstick::accuracy() masks fabletools::accuracy(), forecast::accuracy()
## x scales::discard()     masks purrr::discard()
## x dplyr::filter()       masks stats::filter()
## x xts::first()          masks dplyr::first()
## x recipes::fixed()      masks stringr::fixed()
## x infer::generate()     masks fabletools::generate()
## x dplyr::lag()          masks stats::lag()
## x xts::last()           masks dplyr::last()
## x parsnip::null_model() masks fabletools::null_model()
## x rsample::populate()   masks Rcpp::populate()
## x yardstick::spec()     masks readr::spec()
## x recipes::step()       masks stats::step()</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="modeltime-1.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 트레이닝 셋과 테스트 셋을 나눈다</span></span>
<span id="cb88-2"><a href="modeltime-1.html#cb88-2" aria-hidden="true" tabindex="-1"></a>students.total<span class="sc">$</span>연도 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(students.total<span class="sc">$</span>연도, <span class="st">&#39;-01-01&#39;</span>))</span>
<span id="cb88-3"><a href="modeltime-1.html#cb88-3" aria-hidden="true" tabindex="-1"></a>splits.students <span class="ot">&lt;-</span> <span class="fu">initial_time_split</span>(students.total, <span class="at">prop =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="modeltime-1.html#cb89-1" aria-hidden="true" tabindex="-1"></a>model_fit_arima <span class="ot">&lt;-</span> <span class="fu">arima_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb89-2"><a href="modeltime-1.html#cb89-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;auto_arima&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="modeltime-1.html#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(학생수계 <span class="sc">~</span> 연도, <span class="at">data =</span> <span class="fu">training</span>(splits.students))</span></code></pre></div>
<pre><code>## frequency = 5 observations per 5 years</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="modeltime-1.html#cb91-1" aria-hidden="true" tabindex="-1"></a>model_fit_ets <span class="ot">&lt;-</span> <span class="fu">exp_smoothing</span>() <span class="sc">%&gt;%</span></span>
<span id="cb91-2"><a href="modeltime-1.html#cb91-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;ets&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb91-3"><a href="modeltime-1.html#cb91-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(학생수계 <span class="sc">~</span> 연도, <span class="at">data =</span> <span class="fu">training</span>(splits.students))</span></code></pre></div>
<pre><code>## frequency = 5 observations per 5 years</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="modeltime-1.html#cb93-1" aria-hidden="true" tabindex="-1"></a>model_fit_prophet <span class="ot">&lt;-</span> <span class="fu">prophet_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="modeltime-1.html#cb93-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;prophet&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-3"><a href="modeltime-1.html#cb93-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(학생수계 <span class="sc">~</span> 연도, <span class="at">data =</span> <span class="fu">training</span>(splits.students))</span></code></pre></div>
<pre><code>## Disabling weekly seasonality. Run prophet with weekly.seasonality=TRUE to override this.</code></pre>
<pre><code>## Disabling daily seasonality. Run prophet with daily.seasonality=TRUE to override this.</code></pre>
<pre><code>## n.changepoints greater than number of observations. Using 12</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="modeltime-1.html#cb97-1" aria-hidden="true" tabindex="-1"></a>model_fit_lm <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb97-2"><a href="modeltime-1.html#cb97-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;lm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb97-3"><a href="modeltime-1.html#cb97-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(학생수계 <span class="sc">~</span> <span class="fu">as.numeric</span>(연도),</span>
<span id="cb97-4"><a href="modeltime-1.html#cb97-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> <span class="fu">training</span>(splits.students))</span></code></pre></div>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="modeltime-1.html#cb98-1" aria-hidden="true" tabindex="-1"></a>model_fit_nnetar <span class="ot">&lt;-</span> <span class="fu">nnetar_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb98-2"><a href="modeltime-1.html#cb98-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;nnetar&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb98-3"><a href="modeltime-1.html#cb98-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(학생수계 <span class="sc">~</span> 연도, <span class="at">data =</span> <span class="fu">training</span>(splits.students))</span></code></pre></div>
<pre><code>## frequency = 5 observations per 5 years</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="modeltime-1.html#cb100-1" aria-hidden="true" tabindex="-1"></a>model_fit_tbats <span class="ot">&lt;-</span> <span class="fu">seasonal_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb100-2"><a href="modeltime-1.html#cb100-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;tbats&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb100-3"><a href="modeltime-1.html#cb100-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(학생수계 <span class="sc">~</span> 연도, <span class="at">data =</span> <span class="fu">training</span>(splits.students))</span></code></pre></div>
<pre><code>## frequency = 5 observations per 5 years</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="modeltime-1.html#cb102-1" aria-hidden="true" tabindex="-1"></a>(models_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb102-2"><a href="modeltime-1.html#cb102-2" aria-hidden="true" tabindex="-1"></a>    model_fit_arima,</span>
<span id="cb102-3"><a href="modeltime-1.html#cb102-3" aria-hidden="true" tabindex="-1"></a>    model_fit_ets,</span>
<span id="cb102-4"><a href="modeltime-1.html#cb102-4" aria-hidden="true" tabindex="-1"></a>    model_fit_prophet,</span>
<span id="cb102-5"><a href="modeltime-1.html#cb102-5" aria-hidden="true" tabindex="-1"></a>    model_fit_lm, </span>
<span id="cb102-6"><a href="modeltime-1.html#cb102-6" aria-hidden="true" tabindex="-1"></a>    model_fit_nnetar, </span>
<span id="cb102-7"><a href="modeltime-1.html#cb102-7" aria-hidden="true" tabindex="-1"></a>    model_fit_tbats))</span></code></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 6 x 3
##   .model_id .model   .model_desc             
##       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;                   
## 1         1 &lt;fit[+]&gt; ARIMA(1,2,0)            
## 2         2 &lt;fit[+]&gt; ETS(A,A,N)              
## 3         3 &lt;fit[+]&gt; PROPHET                 
## 4         4 &lt;fit[+]&gt; LM                      
## 5         5 &lt;fit[+]&gt; NNAR(1,1,10)[5]         
## 6         6 &lt;fit[+]&gt; BATS(0.732, {0,0}, 1, -)</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="modeltime-1.html#cb104-1" aria-hidden="true" tabindex="-1"></a>(calibration_tbl <span class="ot">&lt;-</span> models_tbl <span class="sc">%&gt;%</span></span>
<span id="cb104-2"><a href="modeltime-1.html#cb104-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_calibrate</span>(<span class="at">new_data =</span> <span class="fu">testing</span>(splits.students)))</span></code></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 6 x 5
##   .model_id .model   .model_desc              .type .calibration_data
##       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;                    &lt;chr&gt; &lt;list&gt;           
## 1         1 &lt;fit[+]&gt; ARIMA(1,2,0)             Test  &lt;tibble [5 x 4]&gt; 
## 2         2 &lt;fit[+]&gt; ETS(A,A,N)               Test  &lt;tibble [5 x 4]&gt; 
## 3         3 &lt;fit[+]&gt; PROPHET                  Test  &lt;tibble [5 x 4]&gt; 
## 4         4 &lt;fit[+]&gt; LM                       Test  &lt;tibble [5 x 4]&gt; 
## 5         5 &lt;fit[+]&gt; NNAR(1,1,10)[5]          Test  &lt;tibble [5 x 4]&gt; 
## 6         6 &lt;fit[+]&gt; BATS(0.732, {0,0}, 1, -) Test  &lt;tibble [5 x 4]&gt;</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="modeltime-1.html#cb106-1" aria-hidden="true" tabindex="-1"></a>calibration_tbl <span class="sc">%&gt;%</span></span>
<span id="cb106-2"><a href="modeltime-1.html#cb106-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_forecast</span>(</span>
<span id="cb106-3"><a href="modeltime-1.html#cb106-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">new_data    =</span> <span class="fu">testing</span>(splits.students),</span>
<span id="cb106-4"><a href="modeltime-1.html#cb106-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">actual_data =</span> students.total</span>
<span id="cb106-5"><a href="modeltime-1.html#cb106-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb106-6"><a href="modeltime-1.html#cb106-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb106-7"><a href="modeltime-1.html#cb106-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.interactive      =</span> <span class="cn">FALSE</span></span>
<span id="cb106-8"><a href="modeltime-1.html#cb106-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code>## Warning in max(ids, na.rm = TRUE): max에 전달되는 인자들 중 누락이 있어 -Inf를
## 반환합니다</code></pre>
<p><img src="t_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="modeltime-1.html#cb108-1" aria-hidden="true" tabindex="-1"></a>calibration_tbl <span class="sc">%&gt;%</span></span>
<span id="cb108-2"><a href="modeltime-1.html#cb108-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_accuracy</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 9
##   .model_id .model_desc             .type     mae  mape  mase smape   rmse   rsq
##       &lt;int&gt; &lt;chr&gt;                   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1         1 ARIMA(1,2,0)            Test   79663. 1.28  0.509 1.27  8.52e4 0.998
## 2         2 ETS(A,A,N)              Test   16449. 0.263 0.105 0.263 1.75e4 0.998
## 3         3 PROPHET                 Test  101824. 1.65  0.650 1.67  1.15e5 0.996
## 4         4 LM                      Test  500003. 7.99  3.19  7.67  5.05e5 0.998
## 5         5 NNAR(1,1,10)[5]         Test  369674. 5.99  2.36  5.76  4.22e5 0.775
## 6         6 BATS(0.732, {0,0}, 1, ~ Test   18767. 0.302 0.120 0.301 2.20e4 0.998</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="modeltime-1.html#cb110-1" aria-hidden="true" tabindex="-1"></a>model_fit_ets <span class="ot">&lt;-</span> <span class="fu">exp_smoothing</span>() <span class="sc">%&gt;%</span></span>
<span id="cb110-2"><a href="modeltime-1.html#cb110-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;ets&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href="modeltime-1.html#cb110-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(학생수계 <span class="sc">~</span> 연도, <span class="at">data =</span> students.total)</span></code></pre></div>
<pre><code>## frequency = 5 observations per 5 years</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="modeltime-1.html#cb112-1" aria-hidden="true" tabindex="-1"></a>model_fit_tbats <span class="ot">&lt;-</span> <span class="fu">seasonal_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb112-2"><a href="modeltime-1.html#cb112-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;tbats&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb112-3"><a href="modeltime-1.html#cb112-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(학생수계 <span class="sc">~</span> 연도, <span class="at">data =</span> students.total)</span></code></pre></div>
<pre><code>## frequency = 5 observations per 5 years</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="modeltime-1.html#cb114-1" aria-hidden="true" tabindex="-1"></a>(models_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb114-2"><a href="modeltime-1.html#cb114-2" aria-hidden="true" tabindex="-1"></a>    model_fit_ets,</span>
<span id="cb114-3"><a href="modeltime-1.html#cb114-3" aria-hidden="true" tabindex="-1"></a>    model_fit_tbats))</span></code></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 2 x 3
##   .model_id .model   .model_desc                 
##       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;                       
## 1         1 &lt;fit[+]&gt; ETS(A,AD,N)                 
## 2         2 &lt;fit[+]&gt; BATS(0.641, {0,0}, 0.819, -)</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="modeltime-1.html#cb116-1" aria-hidden="true" tabindex="-1"></a>models_tbl <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="modeltime-1.html#cb116-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_forecast</span>(</span>
<span id="cb116-3"><a href="modeltime-1.html#cb116-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">h    =</span> <span class="st">&#39;10 years&#39;</span>,</span>
<span id="cb116-4"><a href="modeltime-1.html#cb116-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">actual_data =</span> students.total</span>
<span id="cb116-5"><a href="modeltime-1.html#cb116-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb116-6"><a href="modeltime-1.html#cb116-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb116-7"><a href="modeltime-1.html#cb116-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.interactive      =</span> <span class="cn">FALSE</span></span>
<span id="cb116-8"><a href="modeltime-1.html#cb116-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code>## Warning: Expecting the following names to be in the data frame: .conf_hi, .conf_lo. 
## Proceeding with &#39;.conf_interval_show = FALSE&#39; to visualize the forecast without confidence intervals.
## Alternatively, try using `modeltime_calibrate()` before forecasting to add confidence intervals.</code></pre>
<p><img src="t_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="미래-취업자수-예측-1" class="section level3" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> 미래 취업자수 예측</h3>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="modeltime-1.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 트레이닝 셋과 테스트 셋을 나눈다</span></span>
<span id="cb118-2"><a href="modeltime-1.html#cb118-2" aria-hidden="true" tabindex="-1"></a>splits.employees <span class="ot">&lt;-</span> <span class="fu">initial_time_split</span>(employees, <span class="at">prop =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="modeltime-1.html#cb119-1" aria-hidden="true" tabindex="-1"></a>model_fit_arima <span class="ot">&lt;-</span> <span class="fu">arima_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb119-2"><a href="modeltime-1.html#cb119-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;auto_arima&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb119-3"><a href="modeltime-1.html#cb119-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(total <span class="sc">~</span> time, <span class="at">data =</span> <span class="fu">training</span>(splits.employees))</span></code></pre></div>
<pre><code>## frequency = 12 observations per 1 year</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="modeltime-1.html#cb121-1" aria-hidden="true" tabindex="-1"></a>model_fit_ets <span class="ot">&lt;-</span> <span class="fu">exp_smoothing</span>() <span class="sc">%&gt;%</span></span>
<span id="cb121-2"><a href="modeltime-1.html#cb121-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;ets&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb121-3"><a href="modeltime-1.html#cb121-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(total <span class="sc">~</span> time, <span class="at">data =</span> <span class="fu">training</span>(splits.employees))</span></code></pre></div>
<pre><code>## frequency = 12 observations per 1 year</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="modeltime-1.html#cb123-1" aria-hidden="true" tabindex="-1"></a>model_fit_prophet <span class="ot">&lt;-</span> <span class="fu">prophet_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb123-2"><a href="modeltime-1.html#cb123-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;prophet&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb123-3"><a href="modeltime-1.html#cb123-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(total <span class="sc">~</span> time, <span class="at">data =</span> <span class="fu">training</span>(splits.employees))</span></code></pre></div>
<pre><code>## Disabling weekly seasonality. Run prophet with weekly.seasonality=TRUE to override this.</code></pre>
<pre><code>## Disabling daily seasonality. Run prophet with daily.seasonality=TRUE to override this.</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="modeltime-1.html#cb126-1" aria-hidden="true" tabindex="-1"></a>model_fit_lm <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="modeltime-1.html#cb126-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;lm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb126-3"><a href="modeltime-1.html#cb126-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(total <span class="sc">~</span> <span class="fu">as.numeric</span>(time) <span class="sc">+</span> <span class="fu">factor</span>(<span class="fu">month</span>(time, <span class="at">label =</span> <span class="cn">TRUE</span>), <span class="at">ordered =</span> <span class="cn">FALSE</span>),</span>
<span id="cb126-4"><a href="modeltime-1.html#cb126-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> <span class="fu">training</span>(splits.employees))</span></code></pre></div>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="modeltime-1.html#cb127-1" aria-hidden="true" tabindex="-1"></a>model_fit_nnetar <span class="ot">&lt;-</span> <span class="fu">nnetar_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb127-2"><a href="modeltime-1.html#cb127-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;nnetar&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb127-3"><a href="modeltime-1.html#cb127-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(total <span class="sc">~</span> time, <span class="at">data =</span> <span class="fu">training</span>(splits.employees))</span></code></pre></div>
<pre><code>## frequency = 12 observations per 1 year</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="modeltime-1.html#cb129-1" aria-hidden="true" tabindex="-1"></a>model_fit_tbats <span class="ot">&lt;-</span> <span class="fu">seasonal_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb129-2"><a href="modeltime-1.html#cb129-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;tbats&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-3"><a href="modeltime-1.html#cb129-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(total <span class="sc">~</span> time, <span class="at">data =</span> <span class="fu">training</span>(splits.employees))</span></code></pre></div>
<pre><code>## frequency = 12 observations per 1 year</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="modeltime-1.html#cb131-1" aria-hidden="true" tabindex="-1"></a>(models_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb131-2"><a href="modeltime-1.html#cb131-2" aria-hidden="true" tabindex="-1"></a>    model_fit_arima,</span>
<span id="cb131-3"><a href="modeltime-1.html#cb131-3" aria-hidden="true" tabindex="-1"></a>    model_fit_ets,</span>
<span id="cb131-4"><a href="modeltime-1.html#cb131-4" aria-hidden="true" tabindex="-1"></a>    model_fit_prophet,</span>
<span id="cb131-5"><a href="modeltime-1.html#cb131-5" aria-hidden="true" tabindex="-1"></a>    model_fit_lm, </span>
<span id="cb131-6"><a href="modeltime-1.html#cb131-6" aria-hidden="true" tabindex="-1"></a>    model_fit_nnetar, </span>
<span id="cb131-7"><a href="modeltime-1.html#cb131-7" aria-hidden="true" tabindex="-1"></a>    model_fit_tbats))</span></code></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 6 x 3
##   .model_id .model   .model_desc                     
##       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;                           
## 1         1 &lt;fit[+]&gt; ARIMA(0,1,1)(0,1,1)[12]         
## 2         2 &lt;fit[+]&gt; ETS(A,AD,A)                     
## 3         3 &lt;fit[+]&gt; PROPHET                         
## 4         4 &lt;fit[+]&gt; LM                              
## 5         5 &lt;fit[+]&gt; NNAR(1,1,10)[12]                
## 6         6 &lt;fit[+]&gt; TBATS(1, {0,0}, 0.971, {&lt;12,3&gt;})</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="modeltime-1.html#cb133-1" aria-hidden="true" tabindex="-1"></a>(calibration_tbl <span class="ot">&lt;-</span> models_tbl <span class="sc">%&gt;%</span></span>
<span id="cb133-2"><a href="modeltime-1.html#cb133-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_calibrate</span>(<span class="at">new_data =</span> <span class="fu">testing</span>(splits.employees)))</span></code></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 6 x 5
##   .model_id .model   .model_desc                      .type .calibration_data
##       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;                            &lt;chr&gt; &lt;list&gt;           
## 1         1 &lt;fit[+]&gt; ARIMA(0,1,1)(0,1,1)[12]          Test  &lt;tibble [10 x 4]&gt;
## 2         2 &lt;fit[+]&gt; ETS(A,AD,A)                      Test  &lt;tibble [10 x 4]&gt;
## 3         3 &lt;fit[+]&gt; PROPHET                          Test  &lt;tibble [10 x 4]&gt;
## 4         4 &lt;fit[+]&gt; LM                               Test  &lt;tibble [10 x 4]&gt;
## 5         5 &lt;fit[+]&gt; NNAR(1,1,10)[12]                 Test  &lt;tibble [10 x 4]&gt;
## 6         6 &lt;fit[+]&gt; TBATS(1, {0,0}, 0.971, {&lt;12,3&gt;}) Test  &lt;tibble [10 x 4]&gt;</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="modeltime-1.html#cb135-1" aria-hidden="true" tabindex="-1"></a>calibration_tbl <span class="sc">%&gt;%</span></span>
<span id="cb135-2"><a href="modeltime-1.html#cb135-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_forecast</span>(</span>
<span id="cb135-3"><a href="modeltime-1.html#cb135-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">new_data    =</span> <span class="fu">testing</span>(splits.employees),</span>
<span id="cb135-4"><a href="modeltime-1.html#cb135-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">actual_data =</span> employees</span>
<span id="cb135-5"><a href="modeltime-1.html#cb135-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb135-6"><a href="modeltime-1.html#cb135-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb135-7"><a href="modeltime-1.html#cb135-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.interactive      =</span> <span class="cn">FALSE</span></span>
<span id="cb135-8"><a href="modeltime-1.html#cb135-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code>## Warning in max(ids, na.rm = TRUE): max에 전달되는 인자들 중 누락이 있어 -Inf를
## 반환합니다</code></pre>
<p><img src="t_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="modeltime-1.html#cb137-1" aria-hidden="true" tabindex="-1"></a>calibration_tbl <span class="sc">%&gt;%</span></span>
<span id="cb137-2"><a href="modeltime-1.html#cb137-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_accuracy</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 9
##   .model_id .model_desc                .type   mae  mape  mase smape  rmse   rsq
##       &lt;int&gt; &lt;chr&gt;                      &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1         1 ARIMA(0,1,1)(0,1,1)[12]    Test   833.  3.10  4.60  3.05  840. 0.795
## 2         2 ETS(A,AD,A)                Test   730.  2.71  4.03  2.68  740. 0.757
## 3         3 PROPHET                    Test   824.  3.06  4.55  3.02  833. 0.760
## 4         4 LM                         Test   728.  2.71  4.02  2.67  738. 0.762
## 5         5 NNAR(1,1,10)[12]           Test   658.  2.45  3.63  2.41  715. 0.361
## 6         6 TBATS(1, {0,0}, 0.971, {&lt;~ Test   903.  3.36  4.99  3.30  913. 0.724</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="modeltime-1.html#cb139-1" aria-hidden="true" tabindex="-1"></a>model_fit_lm <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb139-2"><a href="modeltime-1.html#cb139-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;lm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb139-3"><a href="modeltime-1.html#cb139-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(total <span class="sc">~</span> <span class="fu">as.numeric</span>(time) <span class="sc">+</span> <span class="fu">factor</span>(<span class="fu">month</span>(time, <span class="at">label =</span> <span class="cn">TRUE</span>), <span class="at">ordered =</span> <span class="cn">FALSE</span>),</span>
<span id="cb139-4"><a href="modeltime-1.html#cb139-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> employees)</span>
<span id="cb139-5"><a href="modeltime-1.html#cb139-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-6"><a href="modeltime-1.html#cb139-6" aria-hidden="true" tabindex="-1"></a>model_fit_nnetar <span class="ot">&lt;-</span> <span class="fu">nnetar_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb139-7"><a href="modeltime-1.html#cb139-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;nnetar&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb139-8"><a href="modeltime-1.html#cb139-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(total <span class="sc">~</span> time, <span class="at">data =</span> employees)</span></code></pre></div>
<pre><code>## frequency = 12 observations per 1 year</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="modeltime-1.html#cb141-1" aria-hidden="true" tabindex="-1"></a>(models_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb141-2"><a href="modeltime-1.html#cb141-2" aria-hidden="true" tabindex="-1"></a>    model_fit_lm,</span>
<span id="cb141-3"><a href="modeltime-1.html#cb141-3" aria-hidden="true" tabindex="-1"></a>    model_fit_nnetar))</span></code></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 2 x 3
##   .model_id .model   .model_desc     
##       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;           
## 1         1 &lt;fit[+]&gt; LM              
## 2         2 &lt;fit[+]&gt; NNAR(1,1,10)[12]</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="modeltime-1.html#cb143-1" aria-hidden="true" tabindex="-1"></a>models_tbl <span class="sc">%&gt;%</span></span>
<span id="cb143-2"><a href="modeltime-1.html#cb143-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_forecast</span>(</span>
<span id="cb143-3"><a href="modeltime-1.html#cb143-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">h    =</span> <span class="st">&#39;3 years&#39;</span>,</span>
<span id="cb143-4"><a href="modeltime-1.html#cb143-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">actual_data =</span> employees</span>
<span id="cb143-5"><a href="modeltime-1.html#cb143-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb143-6"><a href="modeltime-1.html#cb143-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb143-7"><a href="modeltime-1.html#cb143-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.interactive      =</span> <span class="cn">FALSE</span></span>
<span id="cb143-8"><a href="modeltime-1.html#cb143-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code>## Warning: Expecting the following names to be in the data frame: .conf_hi, .conf_lo. 
## Proceeding with &#39;.conf_interval_show = FALSE&#39; to visualize the forecast without confidence intervals.
## Alternatively, try using `modeltime_calibrate()` before forecasting to add confidence intervals.</code></pre>
<p><img src="t_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
<div id="미래-코로나-확진자수-예측-1" class="section level3" number="7.3.4">
<h3><span class="header-section-number">7.3.4</span> 미래 코로나 확진자수 예측</h3>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="modeltime-1.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 트레이닝 셋과 테스트 셋을 나눈다</span></span>
<span id="cb145-2"><a href="modeltime-1.html#cb145-2" aria-hidden="true" tabindex="-1"></a>splits.covid19 <span class="ot">&lt;-</span> <span class="fu">initial_time_split</span>(wide.covid19.by.age, <span class="at">prop =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="modeltime-1.html#cb146-1" aria-hidden="true" tabindex="-1"></a>model_fit_arima <span class="ot">&lt;-</span> <span class="fu">arima_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb146-2"><a href="modeltime-1.html#cb146-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;auto_arima&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb146-3"><a href="modeltime-1.html#cb146-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span> <span class="sc">~</span> date, <span class="at">data =</span> <span class="fu">training</span>(splits.covid19))</span></code></pre></div>
<pre><code>## frequency = 7 observations per 1 week</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="modeltime-1.html#cb148-1" aria-hidden="true" tabindex="-1"></a>model_fit_ets <span class="ot">&lt;-</span> <span class="fu">exp_smoothing</span>() <span class="sc">%&gt;%</span></span>
<span id="cb148-2"><a href="modeltime-1.html#cb148-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;ets&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb148-3"><a href="modeltime-1.html#cb148-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span> <span class="sc">~</span> date, <span class="at">data =</span> <span class="fu">training</span>(splits.covid19))</span></code></pre></div>
<pre><code>## frequency = 7 observations per 1 week</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="modeltime-1.html#cb150-1" aria-hidden="true" tabindex="-1"></a>model_fit_prophet <span class="ot">&lt;-</span> <span class="fu">prophet_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb150-2"><a href="modeltime-1.html#cb150-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;prophet&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb150-3"><a href="modeltime-1.html#cb150-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span> <span class="sc">~</span> date, <span class="at">data =</span> <span class="fu">training</span>(splits.covid19))</span></code></pre></div>
<pre><code>## Disabling yearly seasonality. Run prophet with yearly.seasonality=TRUE to override this.</code></pre>
<pre><code>## Disabling daily seasonality. Run prophet with daily.seasonality=TRUE to override this.</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="modeltime-1.html#cb153-1" aria-hidden="true" tabindex="-1"></a>model_fit_lm <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb153-2"><a href="modeltime-1.html#cb153-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;lm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb153-3"><a href="modeltime-1.html#cb153-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(date),</span>
<span id="cb153-4"><a href="modeltime-1.html#cb153-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> <span class="fu">training</span>(splits.covid19))</span></code></pre></div>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="modeltime-1.html#cb154-1" aria-hidden="true" tabindex="-1"></a>model_fit_nnetar <span class="ot">&lt;-</span> <span class="fu">nnetar_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb154-2"><a href="modeltime-1.html#cb154-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;nnetar&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb154-3"><a href="modeltime-1.html#cb154-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span> <span class="sc">~</span> date, <span class="at">data =</span> <span class="fu">training</span>(splits.covid19))</span></code></pre></div>
<pre><code>## frequency = 7 observations per 1 week</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="modeltime-1.html#cb156-1" aria-hidden="true" tabindex="-1"></a>model_fit_tbats <span class="ot">&lt;-</span> <span class="fu">seasonal_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb156-2"><a href="modeltime-1.html#cb156-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;tbats&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb156-3"><a href="modeltime-1.html#cb156-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span> <span class="sc">~</span> date, <span class="at">data =</span> <span class="fu">training</span>(splits.covid19))</span></code></pre></div>
<pre><code>## frequency = 7 observations per 1 week</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="modeltime-1.html#cb158-1" aria-hidden="true" tabindex="-1"></a>(models_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb158-2"><a href="modeltime-1.html#cb158-2" aria-hidden="true" tabindex="-1"></a>    model_fit_arima,</span>
<span id="cb158-3"><a href="modeltime-1.html#cb158-3" aria-hidden="true" tabindex="-1"></a>    model_fit_ets,</span>
<span id="cb158-4"><a href="modeltime-1.html#cb158-4" aria-hidden="true" tabindex="-1"></a>    model_fit_prophet,</span>
<span id="cb158-5"><a href="modeltime-1.html#cb158-5" aria-hidden="true" tabindex="-1"></a>    model_fit_lm, </span>
<span id="cb158-6"><a href="modeltime-1.html#cb158-6" aria-hidden="true" tabindex="-1"></a>    model_fit_nnetar, </span>
<span id="cb158-7"><a href="modeltime-1.html#cb158-7" aria-hidden="true" tabindex="-1"></a>    model_fit_tbats))</span></code></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 6 x 3
##   .model_id .model   .model_desc         
##       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;               
## 1         1 &lt;fit[+]&gt; ARIMA(3,1,1)        
## 2         2 &lt;fit[+]&gt; ETS(A,N,N)          
## 3         3 &lt;fit[+]&gt; PROPHET             
## 4         4 &lt;fit[+]&gt; LM                  
## 5         5 &lt;fit[+]&gt; NNAR(1,1,10)[7]     
## 6         6 &lt;fit[+]&gt; BATS(1, {2,2}, -, -)</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="modeltime-1.html#cb160-1" aria-hidden="true" tabindex="-1"></a>(calibration_tbl <span class="ot">&lt;-</span> models_tbl <span class="sc">%&gt;%</span></span>
<span id="cb160-2"><a href="modeltime-1.html#cb160-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_calibrate</span>(<span class="at">new_data =</span> <span class="fu">testing</span>(splits.covid19)))</span></code></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 6 x 5
##   .model_id .model   .model_desc          .type .calibration_data
##       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;                &lt;chr&gt; &lt;list&gt;           
## 1         1 &lt;fit[+]&gt; ARIMA(3,1,1)         Test  &lt;tibble [31 x 4]&gt;
## 2         2 &lt;fit[+]&gt; ETS(A,N,N)           Test  &lt;tibble [31 x 4]&gt;
## 3         3 &lt;fit[+]&gt; PROPHET              Test  &lt;tibble [31 x 4]&gt;
## 4         4 &lt;fit[+]&gt; LM                   Test  &lt;tibble [31 x 4]&gt;
## 5         5 &lt;fit[+]&gt; NNAR(1,1,10)[7]      Test  &lt;tibble [31 x 4]&gt;
## 6         6 &lt;fit[+]&gt; BATS(1, {2,2}, -, -) Test  &lt;tibble [31 x 4]&gt;</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="modeltime-1.html#cb162-1" aria-hidden="true" tabindex="-1"></a>calibration_tbl <span class="sc">%&gt;%</span></span>
<span id="cb162-2"><a href="modeltime-1.html#cb162-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_forecast</span>(</span>
<span id="cb162-3"><a href="modeltime-1.html#cb162-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">new_data    =</span> <span class="fu">testing</span>(splits.covid19),</span>
<span id="cb162-4"><a href="modeltime-1.html#cb162-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">actual_data =</span> wide.covid19.by.age</span>
<span id="cb162-5"><a href="modeltime-1.html#cb162-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb162-6"><a href="modeltime-1.html#cb162-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb162-7"><a href="modeltime-1.html#cb162-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.interactive      =</span> <span class="cn">FALSE</span></span>
<span id="cb162-8"><a href="modeltime-1.html#cb162-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code>## Warning in max(ids, na.rm = TRUE): max에 전달되는 인자들 중 누락이 있어 -Inf를
## 반환합니다</code></pre>
<p><img src="t_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="modeltime-1.html#cb164-1" aria-hidden="true" tabindex="-1"></a>calibration_tbl <span class="sc">%&gt;%</span></span>
<span id="cb164-2"><a href="modeltime-1.html#cb164-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_accuracy</span>()</span></code></pre></div>
<pre><code>## Warning: Problem with `mutate()` input `.nested.col`.
## i 표준편차가 0입니다
## i Input `.nested.col` is `purrr::map(...)`.</code></pre>
<pre><code>## Warning in cor(truth, estimate): 표준편차가 0입니다</code></pre>
<pre><code>## # A tibble: 6 x 9
##   .model_id .model_desc          .type   mae  mape  mase smape  rmse     rsq
##       &lt;int&gt; &lt;chr&gt;                &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1         1 ARIMA(3,1,1)         Test  13.9   76.8 1.86   49.4 15.5   0.0227
## 2         2 ETS(A,N,N)           Test  13.8   76.2 1.84   49.1 15.4  NA     
## 3         3 PROPHET              Test  27.2  143.  3.63   75.2 29.0   0.0780
## 4         4 LM                   Test   6.81  34.8 0.909  28.9  8.25  0.0947
## 5         5 NNAR(1,1,10)[7]      Test  16.7   90.8 2.22   55.8 18.3   0.0966
## 6         6 BATS(1, {2,2}, -, -) Test  13.9   76.9 1.86   49.4 15.5   0.0365</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="modeltime-1.html#cb168-1" aria-hidden="true" tabindex="-1"></a>model_fit_lm <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb168-2"><a href="modeltime-1.html#cb168-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;lm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb168-3"><a href="modeltime-1.html#cb168-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(date),</span>
<span id="cb168-4"><a href="modeltime-1.html#cb168-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> wide.covid19.by.age)</span>
<span id="cb168-5"><a href="modeltime-1.html#cb168-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-6"><a href="modeltime-1.html#cb168-6" aria-hidden="true" tabindex="-1"></a>model_fit_ets <span class="ot">&lt;-</span> <span class="fu">exp_smoothing</span>() <span class="sc">%&gt;%</span></span>
<span id="cb168-7"><a href="modeltime-1.html#cb168-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="at">engine =</span> <span class="st">&quot;ets&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb168-8"><a href="modeltime-1.html#cb168-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="st">`</span><span class="at">0-9세</span><span class="st">`</span> <span class="sc">~</span> date, <span class="at">data =</span> wide.covid19.by.age)</span></code></pre></div>
<pre><code>## frequency = 7 observations per 1 week</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="modeltime-1.html#cb170-1" aria-hidden="true" tabindex="-1"></a>(models_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb170-2"><a href="modeltime-1.html#cb170-2" aria-hidden="true" tabindex="-1"></a>    model_fit_lm,</span>
<span id="cb170-3"><a href="modeltime-1.html#cb170-3" aria-hidden="true" tabindex="-1"></a>    model_fit_ets))</span></code></pre></div>
<pre><code>## # Modeltime Table
## # A tibble: 2 x 3
##   .model_id .model   .model_desc
##       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;      
## 1         1 &lt;fit[+]&gt; LM         
## 2         2 &lt;fit[+]&gt; ETS(A,N,N)</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="modeltime-1.html#cb172-1" aria-hidden="true" tabindex="-1"></a>models_tbl <span class="sc">%&gt;%</span></span>
<span id="cb172-2"><a href="modeltime-1.html#cb172-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_forecast</span>(</span>
<span id="cb172-3"><a href="modeltime-1.html#cb172-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">h    =</span> <span class="st">&#39;3 months&#39;</span>,</span>
<span id="cb172-4"><a href="modeltime-1.html#cb172-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">actual_data =</span> wide.covid19.by.age</span>
<span id="cb172-5"><a href="modeltime-1.html#cb172-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb172-6"><a href="modeltime-1.html#cb172-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_modeltime_forecast</span>(</span>
<span id="cb172-7"><a href="modeltime-1.html#cb172-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.interactive      =</span> <span class="cn">FALSE</span></span>
<span id="cb172-8"><a href="modeltime-1.html#cb172-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code>## Warning: Expecting the following names to be in the data frame: .conf_hi, .conf_lo. 
## Proceeding with &#39;.conf_interval_show = FALSE&#39; to visualize the forecast without confidence intervals.
## Alternatively, try using `modeltime_calibrate()` before forecasting to add confidence intervals.</code></pre>
<p><img src="t_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>

</div>
</div>
<!-- </div> -->
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p><a href="https://cran.r-project.org/web/packages/parsnip/index.html" class="uri">https://cran.r-project.org/web/packages/parsnip/index.html</a><a href="modeltime-1.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p><a href="https://cran.r-project.org/web/packages/modeltime/index.html" class="uri">https://cran.r-project.org/web/packages/modeltime/index.html</a><a href="modeltime-1.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p><a href="https://www.tidymodels.org/start/models/" class="uri">https://www.tidymodels.org/start/models/</a><a href="modeltime-1.html#fnref5" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="fable.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["t.pdf", "t.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
