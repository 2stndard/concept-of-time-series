# 시계열 데이터 Import

## 시계열 데이터 타입

R에서 많이 사용하는 시계열 데이터 타입은 다음의 몇가지가 많이 사용됨

-   ts : ts 데이터 타입은 R에서 가장 기본적으로 활용되는 시계열 데이터 타입임. ts 데이터 타입은 'stats' 패키지를 로드해야 사용할 수 있지만 R이 실행될 때 기본적으로 로드되는 패키지이기 때문에 특별한 패키지를 로드하지 않고 바로 활용할 수 있음. 또한 stats 패키지에 포함된 다양한 시계열 데이터 처리 함수를 사용할 수 있어 많이 사용됨.

    -   ts 타입 데이터 생성 예

        ```{r paged.print=TRUE}
        ts(1:10, frequency = 4, start = c(1959, 2))
        #  ts - ts 객체 생성 함수
        #  1:10 - ts 객체 함수에 저장되는 데이터 벡터
        #  frequency - ts 객체의 시간 간격을 지정하는 매개변수
        #  start - ts 객체의 인덱스가 되는 시간의 시작점
        ```

-   zoo : 시간의 순서로 정렬된 S3 클래스의 데이터 타입으로 수치 벡터나 매트릭스와 팩터의 시계열 데이터를 표현함. zoo는 특정한 인덱스 / 날짜 / 시간 클래스의 독립성과 ts 및 기본 R과의 일관성을 확보하기 위한 표준 제네릭의 확장 방법을 제공하는 것임.

    -   zoo 패키지 설치

        ```{r message=FALSE, paged.print=TRUE}
        if(!require(zoo)) {
          install.packages('zoo')
          library(zoo)
        }
        ```

    -   zoo 타입 데이터 생성 예

        ```{r paged.print=TRUE}
        zoo(rnorm(5), as.Date("2008-08-01") + 0:4)
        ```

-   xts : xts는 extensible time-series의 준말로 'xts' 패키지를 로드해야 활용할 수 있는 데이터 타입임. 앞서 기술된 zoo 데이터 타입에 종속된 데이터 타입으로 zoo를 확장하여 다양한 시간 기반 데이터 클래스를 균일하게 처리 할 수 있는 데이터 타입임.

    -   xts 패키지 설치

        ```{r message=FALSE, paged.print=TRUE}
        if(!require(xts)) {
          install.packages('xts')
          library(xts)
        }
        ```

    -   xts 타입 데이터 생성 예

        ```{r}
        xts(rnorm(5), as.Date("2008-08-01") + 0:4)
        as.xts(rnorm(5), as.Date("2008-08-01") + 0:4)
        ```

        -   xts()와 as.xts()의 차이 : xts()는 xts 객체를 생성하는 함수이나 as.xts()는 timeSeries, ts, irts, fts, matrix, data.frame, zoo 객체를 xts객체로 변환하는 함수임. 다음과 같은 차이가 발생함.

            ```{r message=TRUE, error=TRUE}
            ts <- ts(1:10, frequency = 4, start = c(1959, 2))
            xts(ts)
            as.xts(ts)
            ```

-   ts, zoo, xts는 모두 시계열 데이터를 다루는 객체이지만 xts(zoo의 확장판)가 보다 유연한 함수가 있음. 다만 최근에는 ts 객체에도 동일하게 적용할 수 있는 함수가 제공되고 있음.

    ```{r}
    head(ts)  # 시계열 데이터 형태로 보이지 않음
    head(as.xts(ts))  # 시계열 형태로 보임
    ```

## 데이터 Import의 두가지 방법

-   시계열(Time Series) 데이터를 R에서 직접 생성할 수도 있으나 대부분의 경우는 다양한 파일 포맷(Excel, CSV, SPSS 등)으로 저장된 파일에서 읽어들이는 방법이 일반적임.

-   데이터 파일에는 반드시 시계열 데이터의 인덱스로 활용할 수 있는 시간 데이터 컬럼이 필요함.

-   본 문서에서는 다양한 파일 포맷 중 Excel과 CSV파일에서 시계열 데이터를 읽어들여 활용하는 방법을 언급하겠음.

-   파일에서 시계열 데이터를 읽어들이는 방법은 크게 두가지가 있음

    -   데이터를 파일에서 읽어들여 data.frame에 저장 후 저장된 data.frame을 시계열 데이터 타입으로 변환함.

        ```{r message=FALSE}
        library(readxl)
        mydata <- read_excel("exercise1.xlsx") # 엑셀 파일로부터 데이터를 읽어옴

        # Look at the first few lines of mydata
        head(mydata)  # 데이터 확인

        # Create a ts object called myts
        myts <- ts(mydata[2:4], start = c(1981, 1), frequency = 4)  # 읽어온 데이터를 ts 객체로 생성

        class(myts)  # 데이터 확인
        ```

    -   시계열 패키지에서 제공하는 데이터 Import 함수를 이용하여 직접 시계열 데이터 타입으로 읽어들임.
